#!/usr/bin/perl
# ターミナルで使える漢字直接入力のための単純なツール
# 起動方法
# a. 既定のコードマッピングを使う (code/*)
#    ./chkn
# b. 言語を指定する
#    CHKN_LANG=jpn ./chkn # 日本語モード（既定）
#    CHKN_LANG=cht ./chkn # 中国語繁体字モード
# c. 任意のマッピングファイルを使う
#    ./chkn TABLE1 TABLE2
#
# リターンを押す度にテキストをコピーしたりどこかに送信するには$COPY_TOOLの環境
# 変数を指定します。リターンを押すと、このCOPY_TOOLが起動されSTDINにテキストが
# 書き込まれます。例：Mac OS Xの場合、これをpbcopyに設定すると便利です。
#
# COPY_TOOL=pbcopy ./chkn

use strict;
use utf8;
use warnings;

use FindBin;
use Term::ReadKey;

binmode STDERR, ':utf8';
binmode STDOUT, ':utf8';

my $lang = $ENV{CHKN_LANG} // 'jpn';

my %rad_to_key = (
    一 => 'a',
    二 => 'a',
    亠 => 'a',
    𠆢 => 'b',
    人 => 'b',
    亻 => 'b',
    入 => 'c',
    几 => 'c',
    力 => 'c',
    十 => 'c',
    卜 => 'c',
    卩 => 'd',
    厂 => 'd',
    口 => 'd',
    囗 => 'e',
    土 => 'e',
    士 => 'e',
    夊 => 'e',
    夕 => 'e',
    大 => 'e',
    女 => 'f',
    小 => 'f',
    宀 => 'f',
    工 => 'g',
    己 => 'g',
    幺 => 'g',
    广 => 'g',
    彑 => 'h',
    彳 => 'h',
    心 => 'h',
    忄 => 'h',
    㣺 => 'h',
    戈 => 'i',
    戸 => 'i',
    手 => 'i',
    扌 => 'i',
    攵 => 'j',
    文 => 'j',
    斗 => 'j',
    旡 => 'j',
    日 => 'j',
    曰 => 'j',
    月 => 'j',
    木 => 'k',
    欠 => 'l',
    止 => 'l',
    殳 => 'l',
    火 => 'n',
    灬 => 'n',
    爪 => 'n',
    父 => 'n',
    爻 => 'n',
    玄 => 'n',
    田 => 'o',
    疋 => 'o',
    𤴔 => 'o',
    白 => 'p',
    皮 => 'p',
    皿 => 'p',
    目 => 'p',
    矛 => 'p',
    矢 => 'p',
    石 => 'p',
    禾 => 'q',
    穴 => 'q',
    立 => 'q',
    飛 => 't',
    耳 => 't',
    肉 => 't',
    臣 => 't',
    臼 => 't',
    舌 => 't',
    艹 => 'u',
    虍 => 'v',
    言 => 'w',
    豸 => 'x',
    足 => 'x',
    𧾷 => 'x',
    身 => 'x',
    酉 => 'y',
    阜 => ';',
    隹 => ';',
    韭 => ';',
    音 => ';',
    食 => ',',
    骨 => ',',
    鬥 => ',',
    鬯 => '.',
    魚 => '.',
    鳥 => '.',
    鹵 => '.',
    龜 => '/',
);

my @yomiken = (
    'b'..'d',
    'f'..'h',
    'j'..'n',
    'p'..'t',
    'v'..'z',
    ';',
    ',',
    '.',
    '/',
);

my @yomi_ranges = qw{ア エキ カイ カン キ キヨ ケ コ コク シ シヤ シヨ シン セキ ソウ タイ チヨ テン トク ハン フ ホ マ ラ ル};

@yomiken == @yomi_ranges or die;

# 2~3打鍵コードの文字列 => 実際に入力される文字・文字列
my %codes;

# 間違いやすい字の実際ではないけど調べ得るコードプレフィックス
# 例えば、合の部首は口《ｄ》けれど、人《ｂ》と思い込む可能性がある
# なので、上記の%codesマップにdkg->合と云うエントリーがあるのに対して
# %suggestionsに"bg"と云うキーがあって、配列リファレンスの値に
# "dkg -> 合 (部首＝口)"のような文字列が含まれている。
#
# 入力コードプレフィックス => 入力したいと思われる漢字などの配列
my %suggestions;

my @codes_files = @ARGV;
my @entered_text;
my @uncommitted;

my @kanji_keys = ('a'..'z', q{;}, q{,}, q{.}, q{/});

sub shift_key {
    my ($key) = @_;
    $key =~ tr{1-90[a-z];,./}{!@#$%^&*()[A-Z]:<>?};
    return $key;
}

sub term_copy {
    my $copy_tool = $ENV{COPY_TOOL};
    if (!$copy_tool) {
        return;
    }

    open my $tool_proc, '|-', $copy_tool
        or die "Cannot run '$copy_tool': $!";
    binmode $tool_proc, ':utf8';
    print $tool_proc @_;
}

sub clear_screen {
    print "\033[2J";
}

sub erase_to_eol {
    print "\033[K";
}

my @priority_groups;

if ($lang eq 'jpn') {
    # JIS第一水準
    @priority_groups = ('一丁七万丈三上下不与丑且世丘丙丞両並中串丸丹主乃久之乍乎乏乗乙九乞也乱乳乾亀了予争事二云互五井亘亙些亜亡交亥亦亨享京亭亮人什仁仇今介仏仔仕他付仙代令以仮仰仲件任企伊伍伎伏伐休会伝伯伴伶伸伺似伽佃但位低住佐佑体何余作佳併佼使侃例侍供依侠価侭侮侯侵侶便係促俄俊俗保信俣修俳俵俸俺倉個倍倒倖候借倣値倦倫倭倶倹偉偏停健偲側偵偶偽傍傑傘備催傭債傷傾僅働像僑僕僚僧僻儀億儒償優儲允元兄充兆兇先光克免兎児党兜入全八公六共兵其具典兼内円冊再冒冗写冠冥冨冬冴冶冷凄准凋凌凍凝凡処凧凪凱凶凸凹出函刀刃分切刈刊刑列初判別利到制刷券刺刻剃則削前剖剛剣剤剥副剰割創劃劇劉力功加劣助努劫励労効劾勃勅勇勉動勘務勝募勢勤勧勲勺勾勿匁匂包化北匙匝匠匡匪匹区医匿十千升午半卑卒卓協南単博卜占卦卯印危即却卵卸卿厄厘厚原厨厩厭厳去参又叉及友双反収叔取受叙叛叡叢口古句叩只叫召可台叱史右叶号司吃各合吉吊吋同名后吏吐向君吟吠否含吸吹吻吾呂呆呈呉告呑周呪味呼命咋和咲咳咽哀品哉員哨哩哲唄唆唇唐唖唯唱唾啄商問啓善喉喋喚喜喝喧喪喫喬喰営嗣嘆嘉嘗嘘嘩嘱噂噌噛器噴噸噺嚇嚢囚四回因団困囲図固国圃圏園土圧在圭地坂均坊坐坑坤坦坪垂型垢垣埋城埜域埠埴執培基埼堀堂堅堆堕堤堪堰報場堵堺塀塁塊塑塔塗塘塙塚塞塩填塵塾境墓増墜墨墳墾壁壇壊壌壕士壬壮声壱売壷変夏夕外夙多夜夢大天太夫央失夷奄奇奈奉奏契奔套奥奨奪奮女奴好如妃妄妊妓妖妙妥妨妬妹妻妾姉始姐姑姓委姥姦姪姫姶姻姿威娃娘娠娩娯娼婁婆婚婦婿媒媛嫁嫉嫌嫡嬉嬢嬬嬰子孔字存孜孝孟季孤学孫宅宇守安宋完宍宏宕宗官宙定宛宜宝実客宣室宥宮宰害宴宵家容宿寂寄寅密富寒寓寛寝察寡寧審寮寵寸寺対寿封専射将尉尊尋導小少尖尚尤尭就尺尻尼尽尾尿局居屈届屋屍屑展属屠屡層履屯山岐岡岨岩岬岱岳岸峠峡峨峯峰島峻崇崎崖崩嵐嵩嵯嶋嶺巌川州巡巣工左巧巨差己巳巴巷巻巽巾市布帆希帖帝帥師席帯帰帳常帽幅幌幕幡幣干平年幸幹幻幼幽幾庁広庄庇床序底庖店庚府度座庫庭庵庶康庸廃廉廊廓廟廠延廷建廻廼廿弁弄弊式弐弓弔引弗弘弛弟弥弦弧弱張強弼弾彊当形彦彩彪彫彬彰影役彼往征径待律後徐徒従得御復循微徳徴徹徽心必忌忍志忘忙応忠快念忽怒怖怜思怠急性怨怪怯恋恐恒恕恢恥恨恩恭息恰恵悉悌悔悟悠患悦悩悪悲悶悼情惇惑惚惜惟惣惨惰想惹愁愈愉意愚愛感慈態慌慎慕慢慣慧慨慮慰慶慾憂憎憐憤憧憩憲憶憾懇懐懲懸戊戎成我戒或戚戟戦戯戴戸戻房所扇扉手才打払托扮扱扶批承技抄把抑投抗折抜択披抱抵抹押抽担拍拐拒拓拘拙招拝拠拡括拭拳拶拷拾持指按挑挙挟挨挫振挺挽挿捉捌捕捗捜捧捨据捲捷捺捻掃授掌排掘掛掠採探接控推掩措掬掲掴掻揃描提揖揚換握揮援揺損搬搭携搾摂摘摩摸摺撃撒撚撞撤撫播撮撰撲撹擁操擢擦擬擾支改攻放政故敏救敗教敢散敦敬数整敵敷文斉斌斎斐斑斗料斜斡斤斥斧斬断斯新方於施旅旋族旗既日旦旧旨早旬旭旺昂昆昇昌明昏易昔星映春昧昨昭是昼時晃晋晒晦晩普景晴晶智暁暇暑暖暗暢暦暫暮暴曇曙曜曝曲曳更書曹曽曾替最月有朋服朔朕朗望朝期木未末本札朱朴机朽杉李杏材村杓杖杜束条杢来杭杯東杵杷松板枇析枕林枚果枝枠枢枯架柁柄柊柏某柑染柔柘柚柱柳柴柵査柾柿栂栃栄栓栖栗校栢株栴核根格栽桁桂桃案桐桑桓桔桜桝桟桧桶梁梅梓梗梢梧梨梯械梱梶梼棄棉棋棒棚棟森棲棺椀椅椋植椎椙椛検椴椿楊楓楕楚楠楢業楯楳極楼楽概榊榎榔榛構槌槍様槙槻槽樋樗標樟模権横樫樵樹樺樽橋橘機橡橿檀檎櫓櫛櫨欄欝欠次欣欧欲欺欽款歌歎歓止正此武歩歪歯歳歴死殆殉殊残殖殴段殺殻殿毅母毎毒比毘毛氏民気水氷永氾汀汁求汎汐汗汚汝江池汰汲決汽沃沈沌沓沖沙没沢沫河沸油治沼沿況泉泊泌法泡波泣泥注泰泳洋洗洛洞津洩洪洲活派流浄浅浜浦浩浪浬浮浴海浸消涌涙涛涜涯液涼淀淋淑淘淡淫深淳淵混添清渇済渉渋渓渚減渠渡渥渦温測港湊湖湘湛湧湯湾湿満溌源準溜溝溢溶溺滅滋滑滝滞滴漁漂漆漉漏演漕漠漢漣漫漬漸潅潔潜潟潤潮潰澄澗澱激濁濃濠濡濫濯瀕瀞瀦瀧瀬灘火灯灰灸灼災炉炊炎炭点為烈烏烹焔焚無焦然焼煉煎煙煤照煩煮煽熊熔熟熱燃燈燐燕燥燦燭爆爪爵父爺爽爾片版牌牒牙牛牝牟牡牢牧物牲特牽犀犠犬犯状狂狐狗狙狛狩独狭狸狼狽猛猟猪猫献猶猷猿獄獅獣獲玄率玉王玖玩玲珂珊珍珠珪班現球理琉琢琳琴琵琶瑚瑛瑞瑠瑳璃環璽瓜瓢瓦瓶甑甘甚甜生産甥用甫田由甲申男町画界畏畑畔留畜畝畠畢略畦番異畳畷畿疋疎疏疑疫疲疹疾病症痔痕痘痛痢痩痴療癌癒癖発登白百的皆皇皐皮皿盃盆盈益盗盛盟監盤目盲直相盾省眉看県真眠眺眼着睡督睦瞥瞬瞭瞳矛矢知矧矩短矯石砂研砕砥砦砧砲破砺砿硝硫硬硯硲碁碇碍碑碓碕碗碧碩確磁磐磨磯礁礎示礼社祁祇祈祉祐祖祝神祢祥票祭祷禁禄禅禍禎福禦禰禽禾禿秀私秋科秒秘租秤秦秩称移稀程税稔稗稚稜種稲稼稽稿穀穂穆積穎穏穐穣穫穴究空穿突窃窄窒窓窟窪窮窯窺竃立竜章竣童竪端競竹竺竿笈笑笛笠笥符第笹筆筈等筋筏筑筒答策箆箇箔箕算管箪箭箱箸節範篇築篠篤篭簡簸簾簿籍米籾粁粂粉粋粍粒粕粗粘粛粟粥粧精糊糎糖糞糟糠糧糸系糾紀約紅紋納紐純紗紘紙級紛素紡索紫紬累細紳紹紺終絃組経結絞絡絢給統絵絶絹継続綜綬維綱網綴綻綾綿緊緋総緑緒線締編緩緬緯練縁縄縛縞縦縫縮績繁繊繋繍織繕繭繰纂纏缶罪罫置罰署罵罷羅羊美群羨義羽翁翌習翠翫翰翻翼耀老考者而耐耕耗耳耶耽聖聞聡聯聴職聾肇肉肋肌肖肘肝股肢肥肩肪肯肱育肴肺胃胆背胎胞胡胤胴胸能脂脅脆脇脈脊脚脱脳脹腎腐腔腕腫腰腸腹腺腿膏膚膜膝膨膳膿臆臓臣臥臨自臭至致臼興舌舎舗舘舛舜舞舟航般舵舶舷船艇艦艮良色艶芋芙芝芥芦芭芯花芳芸芹芽苅苑苓苔苗苛若苦苧苫英茂茄茅茎茜茨茶茸草荊荏荒荘荷荻莞莫莱菅菊菌菓菖菜菟菩華菰菱萄萌萎萩萱落葉葎著葛葡董葦葬葱葵葺蒋蒐蒔蒙蒜蒲蒸蒼蓄蓉蓋蓑蓬蓮蔀蔑蔓蔚蔦蔭蔵蔽蕃蕉蕊蕎蕗蕨蕩蕪薄薗薙薦薩薪薫薬薮薯藁藍藤藩藷藻蘇蘭虎虐虚虜虞虫虹虻蚊蚕蚤蛇蛋蛍蛎蛙蛤蛭蛮蛸蛾蜂蜘蜜蝉蝋蝕蝦蝶蝿融螺蟹蟻血衆行術街衛衝衡衣表衰衷衿袈袋袖被袴袷裁裂装裏裕補裟裡裳裸製裾複褐褒襖襟襲西要覆覇見規視覗覚覧親観角解触言訂計訊討訓託記訟訣訪設許訳訴診註証詐詑詔評詞詠詣試詩詫詮詰話該詳誇誉誌認誓誕誘語誠誤説読誰課誹誼調談請諌諏諒論諜諦諭諮諸諺諾謀謁謂謄謎謙講謝謡謬謹識譜警議譲護讃讐谷豆豊豚象豪豹貌貝貞負財貢貧貨販貫責貯貰貴買貸費貼貿賀賂賃賄資賊賎賑賓賛賜賞賠賢賦質賭購贈贋赤赦赫走赴起超越趣趨足距跡跨路跳践踊踏蹄蹟蹴躍身躯車軌軍軒軟転軸軽較載輔輝輩輪輯輸輿轄轍轟轡辛辞辰辱農辺辻込辿迂迄迅迎近返迦迩迫迭述迷追退送逃逆透逐逓途逗這通逝速造逢連逮週進逸逼遁遂遅遇遊運遍過道達違遜遠遡遣遥適遭遮遵遷選遺遼避還邑那邦邪邸郁郊郎郡部郭郵郷都鄭酉酋酌配酎酒酔酢酪酬酵酷酸醇醍醐醒醗醜醤醸釆采釈里重野量金釘釜針釣釦釧鈍鈎鈴鈷鉄鉛鉢鉦鉱鉾銀銃銅銑銘銚銭鋒鋤鋪鋭鋲鋳鋸鋼錆錐錘錠錦錨錫錬錯録鍋鍍鍔鍛鍬鍵鍾鎌鎖鎗鎚鎧鎮鏑鏡鐘鐙鐸鑑鑓長門閃閉開閏閑間関閣閤閥閲闇闘阜阪防阻阿陀附降限陛院陣除陥陪陰陳陵陶陸険陽隅隆隈隊階随隔隙際障隠隣隷隻隼雀雁雄雅集雇雌雑雛離難雨雪雫雰雲零雷電需震霊霜霞霧露青靖静非面革靭靴鞄鞍鞘鞠鞭韓韮音韻響頁頂頃項順須預頑頒頓頗領頚頬頭頴頻頼題額顎顔顕願顛類顧風飛食飢飯飲飴飼飽飾餅養餌餐餓館饗首香馨馬馳馴駁駄駅駆駈駐駒駕駿騎騒験騨騰驚骨骸髄高髪髭鬼魁魂魅魔魚魯鮎鮒鮪鮫鮭鮮鯉鯖鯛鯨鯵鰍鰐鰭鰯鰹鰻鱈鱒鱗鳥鳩鳳鳴鳶鴇鴎鴛鴨鴫鴬鴻鵜鵠鵡鵬鶏鶴鷲鷹鷺鹸鹿麓麗麟麦麹麺麻麿黄黍黒黙黛鼎鼓鼠鼻齢龍',
    # JIS第二水準
    '丐丕丗个丱丶丼丿乂乕乖乘乢亂亅亊于亞亟亠亢亰亳亶仂仄仆仍从仗仞仟仭价伉伜估佇佗佚佛佝佞佩佯佰佶佻來侈侏侑侖侘侫俎俐俑俔俘俚俛俟俤俥俯俶俾倅倆倏們倔倚倡倥倨倩倪倬偃假偈偐偕偖做偬偸傀傅傚傲傳傴僂僉僊僖僞僣僥僭僮僵價儁儂儉儔儕儖儘儚儡儷儺儻儼儿兀兌兒兔兢兩兪兮冀冂冉册冏冐冑冓冕冖冢冤冦冩冪冫冰冱冲决况冽凅凉凖凛凜几凩凭凰凵凾刄刋刎刔刧刪刮刳刹剄剋剌剏剔剞剩剪剱剳剴剽剿劈劍劑劒劔劬劭劵劼勁勍勒勗勞勠勣勦勳勵勸勹匆匈匍匏匐匕匚匣匯匱匳匸區卅卆卉卍卞卩卮卷卻厂厖厠厥厦厮厰厶參叟叨叭叮叺吁吝吩听吭吮吶吼吽呀呎呟呰呱呵呶呷呻咀咄咆咎咏咐咒咢咤咥咨咫咬咯咸咼咾哂哄哇哈哘哢哥哦哭哮哺哽唏唔售唳唸唹啀啅啌啖啗啜啝啣啻啼啾喀喃喇喊喘喙喞喟喨喩單嗄嗅嗇嗔嗚嗜嗟嗤嗷嗹嗽嗾嘔嘖嘛嘯嘲嘴嘶嘸噎噐噤噪噫噬嚀嚆嚊嚏嚔嚠嚥嚮嚴嚶嚼囀囁囂囃囈囎囑囓囗囘囮囹囿圀圄圈圉國圍圓圖團圜圦圷圸圻址坎坏坡坩坿垈垉垓垠垤垪垰垳埀埃埆埒埓埔埖埣堊堋堙堝堡堯堽塋塒塢塰塲塹墅墟墫墮墸墹墺墻壅壑壓壗壘壙壜壞壟壤壥壯壹壺壻壼壽夂夊夐夘夛夥夬夭夲夸夾奎奐奕奘奚奠奢奧奩奬奸妁妍妛妝妣妲姆姙姚姜姨娉娑娚娜娟娥娵娶婀婉婢婪婬媚媼媽媾嫂嫋嫐嫖嫗嫣嫦嫩嫺嫻嬋嬌嬖嬪嬲嬶嬾孀孃孅孑孕孚孛孥孩孰孱孳孵學孺宀它宦宸寃寇寉寐寔寞寢寤寥實寨寫寰寳寶尅將專對尓尠尢尨尸尹屁屆屎屏屐屓屬屮屶屹岌岑岔岫岶岷岻岼岾峅峇峙峩峪峭峺峽崋崑崔崕崗崘崙崚崛崟崢嵋嵌嵎嵒嵜嵬嵳嵶嶂嶄嶇嶌嶐嶝嶢嶬嶮嶷嶼嶽巉巍巒巓巖巛巫已巵帋帑帙帚帛帶帷幀幃幄幇幎幔幗幟幢幤幵并幺广庠廁廂廈廏廐廖廚廛廝廡廢廣廨廩廬廰廱廳廴廸廾弃弉弋弌弍弑弖弩弭弯弸彁彈彌彎彑彖彗彙彜彝彡彭彳彷彿徂徃徇很徊徑徘徙從徠徨徭徼忖忝忤忰忱忸忻忿怎怏怐怕怙怛怡怦怩怫怱怺恁恂恃恆恊恍恙恚恟恠恣恤恪恫恬恷悁悃悄悋悍悒悖悗悚悛悧悳悴悵悸悽惆惓惘惠惡惧惱惴惶惷惺惻愀愃愆愍愎愕愡愧愨愬愴愼愽愾愿慂慄慇慊慍慓慘慙慚慝慟慥慫慯慱慳慴慵慷憇憊憑憔憖憙憚憫憬憮憺懃懆懈應懊懋懌懍懣懦懴懶懷懺懼懽懾懿戀戈戉戌戍戔戛戝戞戡截戮戰戲戳扁扈扎扛扞扠扣扨扼找抂抃抉抒抓抔抖抛抬抻拂拆拇拈拉拊拌拏拑拔拗拜拮拯拱拵拿挂挈挌挧挾捍捏捐捩捫捶掀掉掎掏掖掟掣掫掵掾揀揄揆揉插揣揩揶搆搏搓搖搗搜搦搨搴搶摎摧摯摶撈撓撕撥撩撻撼擂擅擇擒擔擘據擠擡擣擧擯擱擲擴擶擺擽攀攅攘攜攝攣攤攪攫攬攴攵收攷攸效敍敕敖敘敝敞敲數斂斃斈斛斟斫斷旁旃旄旆旌旒旙旛无旡旱旻昃昊昜昴昵昶昿晁晄晉晏晝晞晟晢晤晧晨晰暃暄暈暉暎暘暝暸暹暼暾曁曄曉曖曚曠曦曩曰曵曷曼會朏朖朞朦朧朮朶朷朸朿杁杆杙杞杠杣杤杪杰杲杳杼枅枉枋枌枡枦枩枳枴枷枸枹柆柎柝柞柢柤柧柩柬柮柯栞栩栫栲桀框桍桎桙档桴桷桾桿梃梍梏梔梛條梟梠梦梭梳梵梹梺棆棊棍棔棕棗棘棠棡棣棧棯棹椁椄椈椌椏椒椚椡椢椣椥椦椨椪椰椶椹椽楔楙楜楝楞楡楪楫楮楴楷楸楹楾榁榑榕榜榠榧榮榱榲榴榻榾榿槁槃槇槊槎槐槓槝槞槧槨槫槭槲槹槿樂樅樊樌樒樓樔樛樞樢樣樮樶樸橄橇橈橙橢橦橲橸檄檍檐檗檜檠檢檣檪檬檮檳檸檻櫁櫂櫃櫑櫚櫞櫟櫪櫺櫻欅權欒欖欟欷欸欹歃歇歉歐歔歙歛歟歡歸歹歿殀殃殄殍殕殘殞殤殪殫殯殱殲殳殷殼毀毆毋毓毟毫毬毯毳氈氓气氛氣氤汕汞汢汨汪汳汾沁沂沍沐沒沚沛沮沱沺沽沾泄泅泓泗泙泛泝泪泯泱洌洒洙洟洫洳洵洶洸洽浙浚浣浤浹涅涎涓涕涵涸淅淆淇淌淒淕淙淞淤淦淨淪淬淮淹淺渊渕渙渝渟渣渤渫渭渮游渺渾湃湍湎湟湫湮湲湶溂溏溘溟溥溪溯溲溷溽滂滄滉滌滓滔滕滬滯滲滷滸滾滿漑漓漱漲漾漿潁潘潛潦潭潯潴潸潺潼澀澁澂澆澎澑澡澣澤澪澳澹濂濆濔濕濘濛濟濤濬濮濱濳濶濺濾瀁瀉瀋瀏瀑瀘瀚瀛瀝瀟瀰瀲瀾灌灑灣炒炙炬炮炯炳炸烋烙烝烟烱烽焉焙焜煌煕煖煢煥煦煬熄熈熏熕熙熨熬熹熾燉燎燒燔燗營燠燧燬燮燵燹燻燼燿爍爐爛爨爬爭爰爲爻爼爿牀牆牋牘牴牾犁犂犇犒犖犢犧犲犹狃狄狆狎狒狠狡狢狷狹猊猖猗猜猝猥猩猯猴猾獎獏獗獨獪獰獵獸獺獻玳玻珀珈珎珞珥珮珱珸琅琥琲琺琿瑁瑕瑙瑜瑟瑣瑤瑩瑪瑯瑰瑶瑾璋璞璢璧瓊瓏瓔瓠瓣瓧瓩瓮瓰瓱瓲瓷瓸甃甄甅甌甍甎甓甕甞甦甬甸甼畄畆畉畊畋畍畚畛畤畧畩畫畭畴當畸疂疆疇疉疊疔疚疝疣疥疱疳疵疸疼疽痂痃痊痍痒痙痞痣痰痲痳痺痼痾痿瘁瘉瘋瘍瘟瘠瘡瘢瘤瘧瘰瘴瘻癆癇癈癘癜癡癢癧癨癩癪癬癰癲癶癸發皀皃皈皋皎皓皖皙皚皰皴皷皸皹皺盂盍盒盖盜盞盡盥盧盪盻眄眇眈眛眞眤眥眦眩眷眸睇睚睛睥睨睫睹睾睿瞋瞎瞑瞞瞠瞰瞶瞹瞻瞼瞽瞿矇矍矗矚矜矣矮矼砌砒砠硅硴硼碆碌碎碚碣碪碯碵碼碾磅磆磊磋磑磔磚磧磬磴磽礇礑礒礙礦礪礫礬祀祓祕祗祚祟祠祺祿禀禊禝禧禪禮禳禹禺秉秕秡秣秧秬稈稍稘稙稟稠稱稷稻稾穃穉穗穡穢穩穰穹穽窈窕窖窗窘窩窰窶窿竄竅竇竈竊竍竏竒竓竕站竚竝竟竡竢竦竭竰竸笂笄笆笊笋笏笘笙笞笨笳笵笶筅筌筍筐筝筥筧筬筮筰筱筴筵筺箋箍箏箒箘箙箚箜箝箟箴篁篆篋篌篏篝篥篦篩篳篶篷簀簇簍簑簒簓簔簗簟簣簧簪簫簷簽籀籃籌籏籐籔籖籘籟籠籤籥籬籵粃粐粡粢粤粨粫粭粮粱粲粳粹粽糀糂糅糒糘糜糢糯糲糴糶糺紂紆紊紕紜紮紲紵紿絅絆絋絎絏絖絛絣絨絮絲絳絽綉綏經綛綟綢綣綫綮綯綰綵綸綺綽緇緕緘緜緝緞緡緤緲緻縅縉縊縋縒縟縡縢縣縱縲縵縷縹縺縻總繃繆繖繙繚繝繞繦繧繩繪繹繻繼繽繿纃纈纉續纎纐纒纓纔纖纛纜缸缺罅罌罍罎罐网罔罕罘罟罠罧罨罩罸罹羂羃羆羇羈羌羔羚羝羞羣羮羯羲羶羸羹翅翆翊翔翕翡翦翩翳翹耄耆耋耒耘耙耜耡耨耻耿聆聊聒聘聚聟聢聨聰聲聳聶聹聽聿肄肅肆肓肚肛肬肭胄胖胙胚胛胝胥胯胱胼脉脛脣脩脯脾腆腋腑腓腟腥腦腮腱腴膀膂膃膈膊膓膕膠膣膤膩膰膵膸膺膽膾臀臂臈臉臍臑臘臙臚臟臠臧臺臻臾舁舂舅與舉舊舍舐舒舖舩舫舮舳舸艀艘艙艚艝艟艢艤艨艪艫艱艷艸艾芍芒芟芫芬芻苒苙苜苞苟苡苣苳苴苹苺苻范茆茉茖茗茘茣茫茯茱茲茴茵茹荀荅荐荳荵荼莅莇莉莊莎莓莖莚莟莠莢莨莪莵莽菁菎菘菠菫菲菴菷菻菽萃萇萋萍萓萠萢萪萬萵萸萼葆葢葩葫葭葮葯葷葹蒂蒄蒟蒡蒭蒹蒻蒿蓁蓆蓊蓍蓐蓖蓙蓚蓴蓼蓿蔆蔔蔕蔗蔘蔟蔡蔬蕀蕁蕈蕋蕕蕘蕚蕣蕭蕷蕾薀薇薈薊薐薑薔薛薜薤薨薹薺藉藏藐藕藜藝藥藪藹藺藾蘂蘆蘊蘋蘓蘖蘗蘚蘢蘯蘰蘿虍虔處號虧虱蚋蚌蚓蚣蚩蚪蚫蚯蚰蚶蛄蛆蛉蛔蛛蛞蛟蛩蛬蛯蛹蛻蜀蜃蜆蜈蜉蜊蜍蜑蜒蜚蜥蜩蜴蜷蜻蜿蝌蝎蝓蝗蝙蝟蝠蝣蝨蝪蝮蝴蝸螂螟螢螫螯螳螻螽蟀蟄蟆蟇蟋蟐蟒蟠蟯蟲蟶蟷蟾蠅蠍蠎蠏蠑蠕蠖蠡蠢蠣蠧蠱蠶蠹蠻衂衄衍衒衙衞衢衫衲衵衽衾袁袂袍袒袗袙袞袢袤袮袰袱袵袿裃裄裔裘裙裝裨裲裴裹裼褂褄褊褌褓褝褞褥褪褫褶褸褻襁襃襄襌襍襞襠襤襦襪襭襯襴襷襾覃覈覊覓覘覡覦覩覬覯覲覺覽覿觀觚觜觝觧觴觸訃訌訐訖訛訝訥訶詁詆詈詒詛詢詬詭詼誂誄誅誑誚誡誣誥誦誨諂諄諍諚諛諞諠諡諢諤諧諫諱諳諷謇謌謐謔謖謗謚謠謦謨謫謳謾譁證譌譎譏譖譚譛譟譫譬譯譱譴譽讀變讌讎讒讓讖讙讚谺谿豁豈豌豎豐豕豢豫豬豸豺豼貂貅貉貊貍貎貔貘貪貭貮貲貳貶貽賁賈賍賚賣賤賺賻賽贄贅贇贊贍贏贐贓贔贖赧赭赱赳趁趙趺趾跂跋跌跏跖跚跛跟跣跪跫跼跿踈踉踐踝踞踟踪踰踴踵蹂蹇蹈蹉蹊蹌蹐蹕蹙蹠蹣蹤蹲蹶蹼躁躄躅躇躊躋躑躓躔躙躡躪躬躰躱躾軅軆軈軋軛軣軫軻軼軾輅輊輌輒輓輕輙輛輜輟輦輳輹輻輾轂轅轆轉轌轎轗轜轢轣轤辜辟辣辧辨辭辮辯辷迚迢迥迪迯迴迸迹迺逅逋逍逎逑逕逖逞逡逧逵逶逹逾遉遏遐遑遒遖遘遙遞遨遯遲遶遽邀邁邂邃邇邉邊邏邨邯邱邵郛郢郤鄂鄒鄙鄰鄲酊酖酘酣酥酩酲酳醂醉醋醢醪醫醯醴醵醺釀釁釉釋釐釖釛釟釡釵釶釼釿鈑鈔鈕鈞鈩鈬鈿鉅鉈鉉鉋鉐鉗鉚鉞鉤銓銕銖銛銜銷銹鋏鋩鋺錏錙錚錢錣錮錵錺錻鍄鍖鍜鍠鍮鍼鎔鎬鎭鎰鎹鏃鏈鏐鏖鏗鏘鏝鏤鏥鏨鐃鐇鐐鐓鐔鐚鐡鐫鐵鐶鐺鑁鑄鑒鑚鑛鑞鑠鑢鑪鑰鑵鑷鑼鑽鑾鑿钁閂閇閊閔閖閘閙閠閧閨閭閹閻閼閾闃闊闌闍闔闕闖關闡闢闥阡阨阮阯陂陋陌陏陜陝陞陟陦陬陲陷隋隍隕隗隘隧隨險隰隱隲隴隶隸隹雉雋雍雎雕雖雙雜雹霄霆霈霍霎霏霑霓霖霙霤霪霰霸霹霽霾靂靄靆靈靉靜靠靡靤靦靨靫靱靹靺靼鞁鞅鞆鞋鞏鞐鞜鞣鞦鞨鞫鞳鞴韃韆韈韋韜韭韲韵韶頌頏頡頤頷頸頽顆顋顏顫顯顰顱顳顴颪颯颱颶飃飄飆飜飩飫飭飮餃餉餒餔餘餝餞餠餡餤餬餮餽餾饂饅饉饋饌饐饑饒饕馗馘馥馭馮馼駑駘駛駝駟駢駭駮駱駲駸駻騁騅騏騙騫騷騾驀驂驃驅驍驕驗驛驟驢驤驥驩驪驫骭骰骼髀髏髑髓體髞髟髢髣髦髫髮髯髱髴髷髻鬆鬘鬚鬟鬢鬣鬥鬧鬨鬩鬪鬮鬯鬱鬲鬻魃魄魍魎魏魑魘魴鮃鮑鮓鮖鮗鮟鮠鮨鮴鮹鯀鯆鯊鯏鯑鯒鯔鯡鯢鯣鯤鯰鯱鯲鰄鰆鰈鰉鰊鰌鰒鰓鰔鰕鰛鰡鰤鰥鰮鰰鰲鰺鰾鱆鱇鱚鱠鱧鱶鱸鳧鳫鳬鳰鴃鴆鴈鴉鴒鴕鴟鴣鴦鴪鴾鴿鵁鵄鵆鵈鵐鵑鵙鵝鵞鵤鵯鵲鵺鶇鶉鶚鶤鶩鶫鶯鶲鶸鶺鶻鷁鷂鷄鷆鷏鷓鷙鷦鷭鷯鷸鷽鸚鸛鸞鹵鹹鹽麁麈麋麌麑麒麕麝麥麩麪麭麸麼麾黌黎黏黐黔默黜黝點黠黥黨黯黴黶黷黹黻黼黽鼇鼈鼕鼡鼬鼾齊齋齎齏齒齔齟齠齡齣齦齧齪齬齲齶齷龕龜龝龠',
    # JIS第三水準
    '㐂㒵㓛㞍㟢㬢㮶㯃㰏㸿㽲䉤䑓䑛䖝䗪䡄䦰䰗丨丯丰亍仡份仿伃伋佈佉佖佟你佪佬佾侊侔侗俉俠俱倁倂倎倘倧倮倻偀偁傔僌僐僦僲儃儆儋儞儵兊兕兗冝凃凊凞凢凮刁刓刕剉剗剝剡劓勈勌勐勖勛勰勻匀匇匜卡卣卽厓厝厲吒吞吧呍呫呴呿咈咖咜咡咩哆哿唎唫唵啐啞喁喆喎喭嗎嘈嘎嘻噉噓噦噯噱噲噶嚙嚞嚩嚬嚳囉囊圊圡圯圳圴坰坷坼垜垸埇埈埏埤埭埵埶埿堉塡塤塼墉增墩壎壒壔壚壠壩夌奝奭妋妒妤姃姒姝姸娓娣婧婭婷婾媄媞媧嫄嬙嬥孁孖孽宓寘寬尒尞尣尫屛屢屺岏岟岣岪岺峋峐峒峴崍崧嵆嵇嵊嵓嵭嶁嶠嶤嶧嶸巋巢帔帘幘幞幷庾廋廹开异弇弝弣弴弶弽彀彅彔彘彤彧彽徉徜徧徯徵德忉忞忡忩怍怔怘怳怵恇悝悞惋惔惕惝惸愜愫愰愷憍憹憼戢戾扃扖扚扯抅拄拖拼挊挘挹捃捥捼揥揭揵搐搔搢摑摠摭摹撾撿擄擊擎擐擷擻攢攩敧斝昀昉昕昞昢昤昫昰昱昳昺晈晌晙晚晡晥晳晷晸暍暠暲暻曆曈曛曨曺曻朓朳杇杈杦杻极枓枘枛枻柀柗柹柼栁栝栬栱桒桛桲桵梣梥梲棈棐棨棭棰棱棼椊椵楂楉楗楣楤楨榀榥榭槏槢槩槪槵槶樏樕樻樾橅橐橖橛橫橳檉檔檝檞檥櫤櫧欛欞欬欵歆歖歠步歧歷殂殩殭每毖毗毿氅氐氳汙汜汴汶沅沆沘沜沪泆泔泠泫泮泻洄洎洮洱洹洿浘浥涂涇涉涔涪涬涿淄淖淚淛淝淼渴湄湜湞溫溱滁滇滎漐漚漪漯漳潑潙潞潡潢潾澈澌澍澔澠澧澶澼濇濊濰濵濹瀅瀆瀨灊灎灝灞灤灵炅炤炫炷烔烘烤焏焞焠焫焮焰煆煇煑煒煜煠煨熅熇熒熺燁燄燾爀爕牕牖犍犛犾狀狻猧猨獐獦獼玕玟玠玢玦玫珉珏珖珙珣珩琇琊琚琛琦琨琪琫琬琮琯琰瑄瑆瑇瑋瑗瑢瑫瑭璆璇璉璐璘璜璟璣璦璨璩璵璿瓈瓉瓚瓿甁甗甯畯畹疒痎痤瘀瘂瘈瘕瘖瘙瘞瘦瘭瘵癃癋癤癥癭癯癱皁皛皝皞皦皪皶盅盌盎盔盦盱盼眊眙眴眶睆睍睎睜睟睢睺瞀瞔瞪矠砭硃硎硏硑硨确碭碰磤磲磷礀礜礮礱礴祅祆祜祹禘禱禸秈秊秔秞秫秭稃稹穝穭窅窠窳窻竎竫竽笒笭笻筇筎筠筭筯筲箞篗篙簁簞簠簱簳簶籙籭籹粏粔粠粼糕糙糝紇紈紓紝紣紱絁絈絓絜絺綃綋綠綦緂緌緖緣縈縑縕縨繇繒繡繫纊纍罇羑羗羿翎翛翟翬翮翺耔耦耵耷耼胊胗胠胳脘腊腠腧腨腭膻臊臏臗艠艴芎芡芣芤芩芮芷芾芿苆苕苽苾茀茁茢茭茺荃荇荑荕荢荽莆莒莘莧莩莿菀菇菏菑菡菪萁萆萊葈葟葰葳蒅蒞蒯蒴蒺蓀蓂蔞蔣蔯蔲蕙蕤蕺薌薏薢薭薰藋藎藭藿蘄蘅蘐蘒蘘蘩蘸虁虗虛虢虬虵蚘蚸蛺蛼蛽蜋蝱螇螈螬螭螵蟖蟬蠆蠊蠐蠔蠟袘袪裊裎裵褘褙褚褜褧褰褲褹襀覔觔觥觶訒訕訢訷詇詎詝詡詵詹誧諐諟諴諶譆譔譙譩讝豉豨賡賴賸賾贒贛趯跎跑跗踠踣踽蹰蹻軀軺輞輭輶轔辦辵迤迨迮逈逭邈邕邗邙邛邢邳邾郄郅郇郗郝郞郯郴鄔鄕鄖鄢鄣鄧鄯鄱鄴鄽酈酛醃醞醬醱醼釗釤釥釭釱釻鈇鈐鈸鈹鈺鈼鉀鉃鉏鉸銈鋂鋋鋌鋓鋠鋿錄錟錡錥鍈鍉鍊鍤鍥鍪鍰鎛鎣鎺鏆鏞鏟鏽鐄鐳鑊鑣鑫鑱鑲閎閟閦閩閬閶閽闋闐闓闚闞陘隄隝隤隥雒雞雩雯霳霻靍靎靏靚靮靳鞕鞮鞺韁韉韛韞韴頊頞頫頰顒顓顖顗顙顚顥顬颺飈飧饘馞騂騃騤騭騮騸驊驎驒骶髁髃髎髖髹鬂鬈鬠鬭魞魦魲魵魹鮄鮊鮏鮞鮧鯁鯎鯥鯸鯽鰀鰣鱁鱏鱐鱓鱣鱥鱷鴝鴞鵃鵇鵒鵣鵰鵼鶊鶖鶬鶼鷀鷗鷧鸇鸕鹼麞麤麬麯麴麵黃黑鼐鼹齗龐龔龗龢欄廊朗虜殺類隆﨏塚﨑﨔凞猪神祥福﨟諸都侮僧免勉勤卑喝嘆器塀墨層屮悔慨憎懲敏既暑梅海渚漢煮琢碑社祉祈祐祖祝禍禎穀突節練繁署者臭著褐視謁謹賓贈逸難響頻𠀋𠮟𡈽𡌛𡑮𡚴𡢽𡸴𣇄𣗄𣜿𣝣𣳾𤟱𥒎𥔎𥝱𥧄𥶡𦫿𦹀𧃴𧚄𨉷𨏍𪆐',
    # JIS漢字第四水準
    '㐆㐬㐮㑨㑪㒒㒼㓁㓇㔟㕝㕞㕣㕮㖦㖨㗅㗚㗴㘅㙊㚑㚖㚙㛏㝡㝢㝫㝬㝵㟁㟨㟴㟽㠀㠯㠶㡀㡜㡡㣺㤗㤚㥯㩮㩳㫖㫗㫪㬎㬚㬜㭭㭷㮇㮈㮍㮤㯍㯰㰦㳃㳒㴑㴞㵤㶚㷀㷔㸅㹠㹦㹨㺃㺔㽗㽵㽷㾮㿉㿗䀹䁘䂓䄅䅈䅏䅣䆴䆿䇦䇮䇳䈇䈎䋆䋖䋝䌂䌫䍃䏮䏰䐈䐗䐜䐢䑶䑺䒑䒳䒾䓔䔈䔍䔥䕃䖸䗥䘏䙁䙥䚡䚯䜌䝤䟽䠖䡎䢵䧧䧺䨄䨩䪼䬻䯂䯊䯒䯨䰠䳄䳑䴇䵷丂丏丒丩丫丬丮乀乇么乑乚乩亝亹亻亼仃仈仐仚仫仱仵伀伖伷伾佔佘佤佷佸佺佽侂侅侒侚侲侾俅俋俏俒俦俲倀倐倓倜倞倢偂偆偎偓偗偣偦偪偰傈傒傓傕傖傜傣傪傱傺傻僄僇僎僔僙僡僩僳儈儗儛兠关养冃冋冘冣冭冼凳凴刂划刖剕剜剬剷劂劄劘劤劦劯劺劻勊勑勷匊匋匤匵匾卂卧卬卺厤厴厷叀叕叚叴叵吤吨呃呕呢呦呬咊咍咕咠咦咭咮咷咺咿哃哬哯哱哳唀唁唉唼啁啇啊啠啡啤啽喂喈喑喿嗉嗌嗑嗒嗝嗢嗩嘇嘐嘨嘰嘷嘽嘿噀噇噞噠噭嚈嚌嚕嚚嚝嚨嚭嚲囅囍囟囨囶囷圕圣圩坅坆坌坍坨坯坳坴坵坻垚垝垞垨垬埌埗埞埦埰埸埻埽堄堞堠堧堲堹塉塌塧墊墋墍墏墐墔墝墪墱壃壍壢壳壴夅夆夋复夔夤夽奆奛奟奵奶奼妟妮妼姈姍姞姣姤姧姮娌娍娗娧娭婕婥婺媋媜媟媠媢媱媳媵媺媿嫚嫜嫠嫥嫮嫰嫵嬀嬈嬗嬭嬴孌孒孨孯孼孿宁宄宖宬寀寎寖寱寽尃尩尰屟屣屧屨屩屰屼岈岊岠岢岦岧岭岵峉崆崐崝崠崤崦崫崱崹嵂嵡嵪嵰嶈嶒嶔嶗嶙嶰嶲嶴嶹巑巗巘巠巤巩帀帒帕帟帮帾幉幖幫幬幭幮庥庪庬庹庿廆廒廙廽弈弎弜弞彇彣彲彾徏徢徤徸忄忇忋忒忓忔忢忮忯忳忼怗怢怤恌恿悊悕您悰悱悾惈惙惛惮惲惵愐愒愓愙愞愺慁慆慠慼憒憓憗憘憥憨憭懕懝懟懵戕戣戩扆扌扑扒扡扤扭扳扻抙抦拕拽挃挍挐挲挵挻挼捁捄捎捙捬掄掔掙掽揔揕揜揠揫揬揲揷搉搞搥搩搯摚摛摝摳摽撇撑撝撟擋擌擕擗擤擥擿攄攏攔攖攞攲敄敔敫敺斁斄斅斊斲斵斸斿旂旉旔旲旹旼昄昈昡昪晅晎晑晗晛晣晪晫晬晭晻暀暐暒暙暭暱暵暿曬朁朅朒朙杌杍杔杝杴杶枒枰枲柃柈柒柙柛柰柷栐栘栟栭栳栻栾桄桅桉桌桕桗桫桮桺桼梂梐梖梘梙梚梜梪梫梴梻棃棅棌棏棖棙棤棥棬棷棻椃椇椻楆楩楬楲楺楿榒榖榘榦榰榷榺榼槀槑槖槣槮槯槳槴槾樑樚樝樰樲樳樴樿橆橉橎橒橤橺橾檃檋檑檟檡檫檽櫆櫐櫔櫜櫝櫬櫱櫲櫳櫽欋欏欐欑欗欯歊歘歬歵歺殁殛殮殽殾毇毈毉毚毦毧毮毱氂氊氎氵氶氺氿汍汛汧汭沄沉沔沕沗沭泂泐泖泚泜泩泬泭洀洊洤洦洧洯洴洼浛浞浠浰涀涁涊涍涑涘涫涮涴淂淈淎淏淐淟淩淶渗渞渢渧渲渶渼湈湉湋湌湏湑湓湔湗湣溓溧溴溿滃滊滙滫滹滻漊漌漘漥漵漶漼潒潗潚潠潨潽澐澖澘澟澥澯澵澾濈濉濚濞濩濼瀀瀇瀊瀣瀹瀺瀼灃灇灋灔灥灩灬灮灶灾炁炆炕炗炟炱炻烊烑烓烜烬焃焄焆焇焈焌焯焱煊煐煓煞熀熖熛熠熢熮熯熳燋燓燙燜爇爫爴爸爹牂牓牗牣牮牯牸牿犎犭犮犰犱狁狌狳狺猇猒猘猙猬猱猳猹猽獒獫獬獮獯獱獷玁玅玊玔玘玜玞玥玨玵玷玹玼玿珅珋珡珧珹珺琁琓琤琱琹瑀瑃瑍瑒瑓瑝瑱璁璅璈璒璗璙璠璡璥璪璫璹璺璻瓖瓘瓞瓫瓯瓺甠甤甪甽甾畀畈畎畐畒畬畱畲畺畽畾疁疌疢疰疷疿痀痆痏痓痝痟痠痧痬痮痱痹瘃瘇瘏瘓瘘瘛瘜瘥瘨瘳瘼癁癉癕癮皕皜皠皡皧皨皯盉盨盬眗眚眭眵睘睠睪睲睼睽瞚瞟瞢瞤瞩矞矟矤矦矪矬矰矴矻砅砆砉砍砙砡砬硇硤硪碊碔碝碞碟碤碻磈磌磎磕磠磡磦磹磺磻磾礐礛礥礰礻祊祘祛祧祲禔禕禖禛禡禩禴离秂秇秌种秖稊稑稕稛稞稭稸穇穌穖穙穜穟穠穧穪穵穸窂窊窐窣窬窹窼窾竌竑竧竨竴笇笧笪笮笯笱笽筁筕筤筦筩筳筹筿箐箑箛箯箵箼篅篊篔篖篚篪篰簃簋簎簏簦籅籊籑籗籞籡籩籮籯籰粦粶粷粿糄糈糍糗糦糫糵紃紉紒紞紽紾絀絇絙絚絪絰絿綆綈綌綗綝綧綪綶綷緀緗緙緦緱緹縐縗縝縠縧縬繅繳繵繾纆纇纑纘纚缻缼缾罃罄罏罒罡罣罤罭罽罾羐羖羜羭翃翏翣翥翯翲耂耈耊耎耑耖耤耬耰聃聦聱聵聻肙肜肤肧肸胅胕胘胦胵胻脍脖脞脤脧脬脵脽腩膁膄膅膘膲臁臃臖臛臤臬臽臿舄舙舡舢舲舴舼艅艆艉艋艏艗艜艣艹艽艿芃芊芓芧芨芲芴芺芼苢苨苷茇茈茌茛茝茰茼荄荔荗荣荿莍莔莕莛莝菉菐菔菝菥菹萏萑萕萗萹葊葏葑葒葙葚葜葥葶葸葼蒁蒗蒦蒾蓎蓏蓓蓜蓧蓪蓯蓰蓱蓺蓽蔌蔛蔤蔥蔫蔴蔾蕏蕑蕓蕞蕡蕢蕯蕻蕽蕿薁薆薓薝薟薷薼藇藊藘藙藟藡藦藶蘀蘑蘞蘡蘤蘧蘹蘼虀虓虖虯虷虺蚇蚉蚍蚑蚜蚝蚨蚱蚳蛁蛃蛑蛕蛗蛣蛦蜅蜇蜎蜐蜓蜙蜟蜡蜣蜱蜺蜾蝀蝃蝑蝘蝤蝥蝲蝼螉螋螓螠螧螾蟁蟎蟟蟣蟥蟦蟪蟫蟭蟵蠁蠃蠋蠓蠨蠮蠲蠼衊衘衟衤衩衯袠袼袽袾裀裑裒裓裛裰裱褁褷襂襅襉襢覀覉覐覟覰覷觖觘觫觱觳觽觿訑訔訡訵訾詅詍詘誐誮誷誾諗諼謅謊謍謜謟謭譃譑譞譶譿讁讋讔讕讜讞谹谽豅豇豏豔豗豩豭豳貒貓貙貛貤賕賖賙賰賱贉贎赬趄趕趦跆跈跙跬跽踆踌踔踖踡踢踧踶踹蹋蹔蹢蹬蹭蹯躘躞躮躳躵躶躻軑軔軹輀輈輗輫轀轊轘辤辴辶迁迆迊迍迓迕迠迱迵迻适逌逷遃遄遝邅邌邐邡邰邶郃郈郜郟郫郲郶郾郿鄀鄄鄆鄘鄜鄞鄷鄹鄺酆酇酗酙酡酤酴酹醅醎醨醮醳醶釃釄釚釬釮鈁鈊鈖鈗鈳鉂鉇鉊鉎鉑鉖鉙鉠鉡鉥鉧鉨鉼鉽鉿銉銍銗銙銟銧銫銲銿鋀鋆鋎鋐鋗鋙鋥鋧鋷鋹鋻錂錍錑錕錝錞錧錩鍇鍑鍗鍚鍫鍱鍳鎈鎋鎏鎞鎡鏁鏇鏜鏢鏧鏱鏵鏻鐉鐏鐖鐗鐲鐴鐻鑅鑭鑯镸镹閆閌閍閫閴闈阝阬阳阴阼陁陡隂隚隩隯隳隺隽雘雚雝霔霣霶靁靇靕靗靛靪鞖鞚鞞鞢鞱鞲鞾韌韑韔韘韙韡韱頄頍頎頔頖頣頥頲頳顇顦颫颭颰颷颸颻颼颿飂飇飋飠飡飣飥飪飰飱飳餈餖餗餚餛餜餱餲餳餺餻餼饀饁饆饍饎饜饟饠馣馦馹馽馿駃駉駔駙駞駰駹駼騊騑騖騚騠騱騶驄驌驘骯骷骹髆髐髒髕髜髠髥髩鬃鬌鬐鬒鬖鬜鬫鬳鬽魋魣魥魫魬魳魶魷鮦鮬鮱鮲鮸鮾鯇鯘鯝鯧鯪鯫鯮鯯鯳鯷鯺鰖鰘鰙鰚鰝鰢鰧鰩鰪鰱鰶鰷鱅鱉鱊鱔鱘鱛鱜鱝鱟鱩鱪鱫鱭鱮鱰鱲鱵鱺鳦鳲鴂鴋鴑鴗鴘鴲鵂鵊鵟鵢鵩鵫鵳鵶鵷鵾鶄鶍鶙鶡鶵鶹鶽鶿鷃鷇鷉鷖鷚鷟鷠鷣鷴鸂鸊鸍鸙鸜鸝鹻麀麅麛麨麽黟黧黮黿鼂鼃鼗鼙鼯鼷鼺鼽齁齅齆齓齕齘齝齩齭齰齵﨓蘒﨡﨤爫縉艹艹辶𠂉𠂢𠂤𠆢𠈓𠌫𠍱𠎁𠏹𠑊𠔉𠗖𠘨𠝏𠠇𠠺𠢹𠥼𠦝𠫓𠬝𠵅𠷡𠹤𠹭𠺕𠽟𡈁𡉕𡉴𡉻𡋗𡋤𡋽𡌶𡍄𡏄𡑭𡗗𡙇𡜆𡝂𡧃𡱖𡴭𡵅𡵢𡵸𡶒𡶜𡶡𡶷𡷠𡸳𡼞𡽶𡿺𢅻𢈘𢌞𢎭𢛳𢡛𢢫𢦏𢪸𢭆𢭏𢭐𢮦𢰝𢰤𢷡𣆶𣇃𣇵𣍲𣏐𣏒𣏓𣏕𣏚𣏟𣏤𣑊𣑋𣑑𣑥𣓤𣕚𣖔𣘸𣘹𣘺𣙇𣜌𣜜𣝤𣟧𣟿𣠤𣠽𣪘𣱿𣴀𣴎𣵀𣷓𣷹𣷺𣽾𤂖𤄃𤇆𤇾𤎼𤘩𤚥𤢖𤩍𤭖𤭯𤰖𤴔𤸎𤸷𤹪𤺋𥁊𥁕𥄢𥆩𥇍𥇥𥈞𥉌𥐮𥓙𥖧𥞩𥞴𥧔𥫣𥫤𥫱𥮲𥱋𥱤𥸮𥹖𥹢𥹥𥻂𥻘𥻨𥼣𥽜𥿔𥿠𥿻𦀌𦀗𦁠𦃭𦉰𦊆𦍌𦐂𦙾𦚰𦜝𦣝𦣪𦥑𦥯𦧝𦨞𦩘𦪌𦪷𦰩𦱳𦳝𦹥𦾔𦿶𦿷𦿸𧄍𧄹𧏚𧏛𧏾𧐐𧑉𧘔𧘕𧘱𧚓𧜎𧜣𧝒𧦅𧪄𧮳𧮾𧯇𧲸𧶠𧸐𧾷𨂊𨂻𨊂𨋳𨐌𨑕𨕫𨗈𨗉𨛗𨛺𨥆𨥉𨥫𨦇𨦈𨦺𨦻𨨞𨨩𨩃𨩱𨪙𨫍𨫝𨫤𨯁𨯯𨴐𨵱𨷻𨸟𨸶𨺉𨻫𨼲𨿸𩊠𩊱𩒐𩗏𩙿𩛰𩜙𩝐𩣆𩩲𩷛𩸕𩸽𩹉𩺊𩻄𩻛𩻩𩿎𪀚𪀯𪂂𪃹𪎌𪐷𪗱𪘂𪘚𪚲',
    );
} elsif ($lang eq 'cht') {
    # 台灣の常用國字標準字體表
    @priority_groups = ('一丁七丈三上下不丐丑且丕世丘丙丞丟並丫中串丸丹主乃久么之乍乎乏乒乓乖乘乙九乞也乩乳乾亂了予事二于云互五井亙些亞亟亡交亥亦亨享京亭亮人什仁仃仄仆仇今介仍仔仕他仗付仙仞仟代令以仰仲仳件任份仿企伉伊伍伏伐休伕伙伯估伴伶伸伺似伽佃但佇位低住佐佑佔何佗余佛作佝佞你佣佩佬佯佰佳併佻佾使侃來侈例侍侏侖供依侮侯侵侶便係促俄俊俎俏俐俑俗俘俚保俞俟俠信修俯俱俳俸俺俾倀倆倉個倌倍倏們倒倔倖倘候倚借倡倣倥倦倨倩倪倫倭值偃假偉偌偎偏偕做停健側偵偶偷偺偽傀傅傍傑傖傘備傢催傭傯傲傳債傷傻傾僅像僑僕僖僚僥僧僭僮僱僵價僻儀儂億儈儉儐儒儔儘償儡優儲儷儼兀允元兄充兆兇先光克兌免兒兔兕兗兜兢入內全兩八公六兮共兵其具典兼冀冉冊再冑冒冕冗冠冢冤冥冬冰冶冷冽准凋凌凍凜凝几凡凰凱凳凶凸凹出函刀刁刃分切刈刊刎刑划列初判別刨利刪刮到制刷券刺刻剁剃則削剋剌前剎剔剖剛剜剝剩剪副割剴創剷剽剿劃劇劈劉劍劑力功加劣助努劫劬劾勁勃勇勉勒動勗勘務勛勝勞募勢勤勦勵勸勻勾勿包匆匈匍匏匐匕化北匙匝匠匡匣匪匯匱匹匾匿區十千卅升午卉半卑卒卓協南博卜卞占卡卦卮卯印危即卵卷卸卹卻卿厄厚厝原厥厭厲去參又叉及友反叔取受叛叟叢口古句另叨叩只叫召叭叮可台叱史右叵司叼吁吃各吆合吉吊吋同名后吏吐向吒君吝吞吟吠否吧吩含吭吮吱吳吵吶吸吹吻吼吾呀呂呃呆呈告呎呢周呱味呵呶呷呸呻呼命咀咄咆咋和咎咐咒咕咖咚咦咨咪咫咬咯咱咳咸咻咽哀品哂哄哇哈哉哎員哥哦哨哩哪哭哮哲哺哼唁唆唉唐唔唧唬售唯唱唳唷唸唾啃啄商啊問啕啖啜啞啟啡啣啤啦啪啻啼啾喀喂喃善喇喉喊喋喔喘喚喜喝喟喧喪喬單喱喲喳喻嗅嗆嗇嗎嗑嗓嗚嗜嗟嗡嗣嗤嗥嗦嗨嗯嗷嗽嗾嘀嘆嘈嘉嘍嘎嘔嘖嘗嘛嘟嘩嘮嘯嘰嘲嘴嘶嘹嘻嘿噎噓噗噙噢噤噥器噩噪噫噬噯噱噴噸噹嚀嚅嚇嚎嚏嚐嚕嚥嚨嚮嚴嚶嚷嚼囀囁囂囈囉囊囌囑囚四回因囤囪困固圃圈國圍園圓圖團土在圬圭圯地圳圾址均坊坍坎坏坐坑坡坤坦坩坪坷坼垂垃型垠垢垣垮埂埃埋城埔域埠埤執培基堂堅堆堊堡堤堪堯堰報場堵塊塌塑塔塗塘塚塞塢填塭塵塹塾墀境墅墊墓墜增墟墨墮墳墾壁壅壇壑壓壕壘壙壞壟壢壤壩士壬壯壹壺壽夏夔夕外夙多夜夠夢夤夥大天太夫夭央失夷夸夾奄奇奈奉奎奏奐契奔奕套奘奚奠奢奧奩奪奮女奴奶奸她好妁如妃妄妊妍妒妓妖妙妝妞妣妤妥妨妮妯妳妹妻妾姆姊始姍姐姑姒姓委姘姚姜姣姥姦姨姪姬姻姿威娃娌娑娓娘娛娜娟娠娣娥娩娶娼婀婁婆婉婊婚婢婦婪婷婿媒媚媛媲媳媼媽媾嫁嫂嫉嫌嫖嫗嫘嫡嫣嫦嫩嫵嫻嬉嬋嬌嬝嬤嬪嬰嬴嬸孀子孑孓孔孕字存孚孜孝孟季孤孩孫孰孱孳孵學孺孽孿它宅宇守安宋完宏宗官宙定宛宜客宣室宥宦宮宰害宴宵家宸容宿寂寄寅密寇富寐寒寓寞察寡寢寤寥實寧寨審寫寬寮寵寶寸寺封射將專尉尊尋對導小少尖尚尤尬就尷尸尹尺尼尾尿局屁居屆屈屋屍屎屏屐屑展屜屠屢層履屬屯山屹岌岐岑岔岡岩岫岱岳岷岸峙峨峪峭峰島峻峽崁崆崇崎崑崔崖崙崛崢崩嵌嵐嵩嶄嶇嶝嶺嶼嶽巍巒巔巖川州巡巢工左巧巨巫差己已巳巴巷巽巾市布帆希帑帕帖帘帚帛帝帥師席帳帶帷常帽幀幅幌幔幕幗幛幟幢幣幫干平年并幸幹幻幼幽幾庇床序底庖店庚府庠度座庫庭庵庶康庸庾廁廂廈廉廊廓廖廚廝廟廠廢廣廬廳延廷建廿弁弄弈弊式弒弓弔引弗弘弛弟弦弧弩弭弱張強弼彆彈彌彎彗彙彝形彤彥彩彪彫彬彭彰影彷役彼彿往征待徇很徊律後徐徑徒得徘徙從御徨復循徬微徵德徹徽心必忌忍忖志忘忙忝忠快忱念忽忿怎怏怒怔怕怖思怠怡急性怨怪怯怵恃恆恍恐恕恙恢恣恤恥恨恩恪恫恬恭息恰恿悄悅悉悌悍悔悖悚悟悠患您悲悴悵悶悸悻悼悽情惆惋惑惕惘惚惜惟惠惡惦惰惱想惴惶惹惺惻愀愁愈愉愎意愕愚愛愜感愣愧愴愾愿慄慇慈態慌慍慎慕慘慚慝慟慢慣慧慨慫慮慰慶慷慼慾憂憊憎憐憑憔憚憤憧憩憫憬憲憶憾懂懇懈應懊懍懣懦懲懵懶懷懸懺懼懾懿戀戈戊戌戍戎成我戒戕或戚戛戟戡戢截戮戰戲戳戴戶戾房所扁扇扈扉手才扎扒打扔托扛扣扭扮扯扳扶批扼找承技抄抉把抑抒抓投抖抗折抨披抬抱抵抹押抽抿拂拄拆拇拈拉拋拌拍拎拐拒拓拔拖拗拘拙拚招拜括拭拮拯拱拳拴拷拼拽拾拿持指挈按挑挖挨挪挫振挺挽挾捂捆捉捎捏捐捕捧捨捩捫捱捲捶捷捻掀掃掄授掉掌掏排掖掘掙掛掠採探掣接控推掩措掬揀揆揉揍描提插揖揚換握揣揩揪揭揮援損搏搓搔搖搗搜搞搪搬搭搶搽搾摑摒摔摘摟摧摩摯摸摹摺撇撈撐撒撓撕撚撞撤撥撩撫撬播撮撰撲撻撼撿擁擂擄擅擇擊擋操擎擒擔擘據擠擦擬擰擱擲擴擺擻擾攀攆攏攔攘攙攜攝攣攤攪攫攬支收改攻放政故效敏救敖敗敘教敝敞敢散敦敬敲整敵敷數斂斃文斐斑斗料斜斟斡斤斥斧斫斬斯新斷方於施旁旅旋旌旎族旖旗既日旦旨早旬旭旱旺昀昂昆昌明昏易昔星映春昧昨昭是時晃晉晌晏晒晚晝晤晦晨普景晰晴晶智暇暈暉暑暖暗暢暨暫暮暴暹曆曉曖曙曝曠曦曰曲曳更曷書曹曼曾替最會月有朋服朔朕朗望朝期朦朧木未末本札朮朱朴朵朽杉李杏材村杖杜杞束杭杯杰東杳杵杷松板枇枉枋析枕林枚果枝枯枴架枸柄柏某柑染柔柚柞查柩柬柯柱柳柴柵柿栓栗校栩株核根格栽桀桂桃桅框案桌桐桑桓桔桶桿梁梃梅梆梓梔梗條梟梢梧梨梭梯械梱梳梵棄棉棋棍棒棕棗棘棚棟棠棣棧森棲棵棹棺椅植椎椒椰楊楓楔楚楞楠楨楫業極楷楹概榆榔榕榛榜榨榫榭榮榴榷榻槁構槌槍槐槓槨槳槽樁樂樅樊樓標樞樟模樣樵樸樹樺樽橄橇橋橘橙機橡橢橫檀檄檔檜檢檬檳檸檻櫂櫃櫓櫚櫛櫝櫥櫻欄權欖欠次欣欲欺欽款歇歉歌歐歙歟歡止正此步武歧歪歲歷歸歹死歿殃殆殉殊殖殘殤殮殯殲段殷殺殼殿毀毅毆毋母每毒毓比毗毛毫毯毽氏氐民氓氖氛氟氣氤氦氧氨氫氮氯氳水永氾汀汁求汐汕汗汙汝汞江池汨汪汰汲決汽汾沁沃沅沈沉沌沐沒沖沙沛沫沮沱河沸油治沼沽沾沿況泄泅泉泊泌泓法泗泛泡波泣泥注泰泱泳洋洌洗洛洞津洪洱洲洶活洽派流浙浚浦浩浪浬浮浴海浸涇消涉涎涓涕涮涯液涵涸涼淄淅淆淇淋淌淑淒淘淙淚淞淡淤淨淪淫淮深淳淵混淹淺添清渙渚減渝渠渡渣渤渥渦測渭港渲渴游渺渾湃湊湍湔湖湘湛湧湮湯溉源準溘溜溝溢溥溪溫溯溶溺溼滂滄滅滇滋滌滑滓滔滬滯滲滴滾滿漁漂漆漏漓演漕漠漢漣漩漪漫漬漯漱漲漳漸漾漿潑潔潘潛潤潦潭潮潰潸潺潼澀澄澆澈澎澗澡澤澧澱澳澹激濁濂濃濘濛濟濠濡濤濫濬濯濱濺濾瀆瀉瀋瀏瀑瀕瀚瀛瀝瀟瀨瀰瀾灌灑灘灣灤火灰灶灸灼災炊炎炒炕炙炫炬炭炮炯炳炸為烈烊烏烘烙烤烹烽焉焊焙焚無焦焰然煉煌煎煙煜煞煤煥煦照煩煬煮煽熄熊熔熙熟熨熬熱熹熾燃燄燈燉燎燐燒燕燙燜營燥燦燧燬燭燮燴燻爆爍爐爛爨爪爬爭爰爵父爸爹爺爻爽爾牆片版牌牒牖牘牙牛牝牟牠牡牢牧物牯牲牴特牽犀犁犄犒犖犛犢犧犬犯狀狂狄狎狐狗狙狠狡狩狷狸狹狼狽猓猖猙猛猜猥猩猴猶猷猾猿獄獅獎獐獗獨獰獲獵獷獸獺獻玀玄率玉王玖玟玨玩玫玲玳玷玻珀珊珍珠班珮現球琅理琉琊琍琢琥琪琳琴琵琶琺琿瑁瑕瑙瑚瑛瑜瑞瑟瑣瑤瑩瑪瑯瑰璃璋璜璣璦璧璩環璽瓊瓏瓜瓠瓢瓣瓦瓶瓷甄甌甕甘甚甜生產甥甦用甩甫甬甭田由甲申男甸甽界畏畔留畚畜畝畢略畦番畫異當畸疆疇疊疋疏疑疙疚疝疤疥疫疲疳疵疹疼疽疾病症痊痔痕痘痙痛痞痢痣痰痱痲痴痺痿瘀瘁瘉瘋瘍瘓瘟瘠瘡瘤瘦瘧瘩瘴瘸療癆癌癒癖癘癢癥癩癬癮癱癲癸登發白百皂的皆皇皈皎皓皖皚皮皰皴皺皿盂盃盆盈益盍盎盒盔盛盜盞盟盡監盤盥盧盪目盯盲直相盹盼盾省眉看真眠眨眩眶眷眸眺眼眾睏睛睜睞睡督睥睦睨睪睫睬睹睽睿瞄瞇瞌瞎瞑瞞瞟瞠瞥瞧瞪瞬瞭瞰瞳瞻瞽瞿矇矓矗矚矛矜矢矣知矩短矮矯石矽砂砌砍研砝砥砧砭砰破砷砸硃硝硫硬硯硼碉碌碎碑碗碘碟碧碩碰碳確碼碾磁磅磊磋磐磕磚磨磬磯磴磷磺礁礎礙礦礪礫礬示社祀祁祆祇祈祉祐祕祖祗祚祝神祟祠祥票祭祺祿禁禍禎福禦禧禪禮禱禹禽禾禿秀私秉秋科秒租秣秤秦秧秩移稀稅稈程稍稔稚稜稟稠種稱稷稻稼稽稿穀穆穌積穎穗穡穢穩穫穴究穹空穿突窄窈窒窕窖窗窘窟窠窩窪窮窯窺竄竅竇竊立站竟章竣童竭端競竹竺竽竿笆笑笙笛笞笠符笨第筆等筋筍筏筐筒答策筠筵筷箋箏箔箕算箝管箭箱箴節篁範篆篇築篙篛篡篤篩篷篾簇簍簑簞簡簣簧簪簫簷簸簽簾簿籃籌籍籐籟籠籤籬籮籲米粉粒粗粟粥粱粳粵粹粽精糊糕糖糙糜糞糟糠糢糧糯糸系糾紀紂約紅紇紉紊紋納紐純紕紗紙級紛紜素紡索紫紮累細紳紹紼絀終絃組絆結絕絞絡絢給絨絮統絲絹綁綏綑經綜綞綠綢維綰綱網綴綵綸綺綻綽綾綿緇緊緒緘線緝緞締緣編緩緬緯練緻縈縊縑縛縣縫縮縱縲縷總績繁繃繅繆織繕繚繞繡繩繪繫繭繹繼繽纂續纏纓纖纜缶缸缺缽罄罈罐罔罕罟罩罪置罰署罵罷罹羅羈羊羋羌美羔羚羞群羨義羯羲羶羸羹羽羿翁翅翌翎習翔翕翟翠翡翩翰翱翳翹翻翼耀老考者耆而耍耐耒耕耗耘耙耜耳耶耽耿聆聊聖聘聚聞聯聰聱聲聳聶職聽聾聿肄肅肆肇肉肋肌肓肖肘肚肛肝股肢肥肩肪肫肯肱育肴肺胃胄背胎胖胚胛胞胡胤胥胭胰胱胳胴胸能脂脅脆脈脊脖脣脩脫脯脹脾腆腋腎腐腑腔腕腥腦腫腮腰腱腳腸腹腺腿膀膈膊膏膚膛膜膝膠膨膩膳膺膽膾膿臀臂臃臆臉臍臏臘臚臟臣臥臧臨自臬臭至致臺臻臼臾舀舂舅與興舉舊舌舍舐舒舔舛舜舞舟舢舨航舫般舵舶舷船艇艘艙艦艮良艱色艾芋芍芒芙芝芟芥芬芭花芳芹芻芽苑苒苓苔苗苛苜苞苟苣若苦苧英茁茂范茄茅茉茗茫茱茲茴茵茶茸茹荀草荊荏荐荒荔荷荸荻荼莉莊莎莒莓莖莘莞莠莢莫莽菁菅菊菌菜菠菩華菰菱菲菴菸菽萃萄萊萋萌萍萎萬萱萵萸萼落葉著葛葡董葦葩葫葬葵葷蒂蒐蒙蒜蒞蒲蒸蒼蒿蓀蓄蓆蓉蓋蓓蓬蓮蓿蔑蔓蔔蔗蔚蔡蔣蔥蔬蔭蔽蕃蕈蕉蕊蕙蕨蕩蕪蕭蕾薄薇薑薔薛薜薩薪薯薰藉藍藏藐藕藝藤藥藩藪藹藺藻蘆蘇蘊蘋蘑蘗蘚蘭蘸蘿虎虐虔處虛虜虞號虧虫虱虹蚊蚌蚓蚣蚤蚩蚪蚯蚱蚵蚶蛀蛄蛆蛇蛋蛔蛙蛛蛟蛤蛭蛹蛻蛾蜀蜂蜃蜇蜈蜓蜘蜜蜢蜥蜴蜻蜿蝌蝕蝗蝙蝠蝦蝨蝴蝶蝸螂螃融螞螟螢螫螳螺螻蟀蟆蟈蟋蟑蟒蟬蟯蟲蟹蟻蠅蠍蠔蠕蠟蠡蠢蠣蠱蠶蠹蠻血行衍術街衙衛衝衡衢衣表衫衰衷袁袂袈袋袍袒袖袞被袱裁裂裊裔裕裘裙補裝裟裡裨裳裴裸裹製褂複褐褒褓褚褥褪褫褲褶褸褻襄襖襟襠襤襪襯襲西要覃覆見規覓視覦親覬覲覺覽觀角解觴觸言訂訃計訊訌討訐訓訕訖託記訛訝訟訣訥訪設許訴診註証詁詆詐詔評詛詞詠詢詣試詩詫詬詭詮詰話該詳詹詼誅誇誌認誑誓誕誘語誠誡誣誤誥誦誨說誰課誼調諂諄談諉請諍諒論諜諦諧諫諭諮諱諷諸諺諾謀謁謂謄謊謎謗謙講謝謠謨謬謹譁證譎譏識譚譜警譬譯議譴護譽讀變讒讓讖讚谷谿豁豆豈豉豌豎豐豔豕豚象豢豪豫豬豹豺貂貉貊貌貍貓貝貞負財貢貧貨販貪貫責貯貲貳貴貶買貸費貼貽貿賀賁賂賃賄賅資賈賊賑賒賓賜賞賠賢賣賤賦質賬賭賴賺購賽贅贈贊贍贏贓贖贗贛赤赦赧赫赭走赳赴起趁超越趕趙趟趣趨足趴趾跆跋跌跎跑跚跛距跟跡跨跪路跳跺跼踏踐踝踟踢踩踫踱踴踵踹蹂蹄蹈蹉蹊蹋蹙蹣蹤蹦蹬蹲蹶蹺蹼躁躂躅躇躉躊躍躑躡躪身躬躲躺軀車軋軌軍軒軔軛軟軸軻軼軾較載輊輒輓輔輕輛輜輝輟輦輩輪輯輸輻輾輿轂轄轅轉轍轎轔轟轡辛辜辟辣辦辨辭辮辯辰辱農迂迄迅迆迎近返迢迥迦迪迫迭述迴迷迺追退送逃逅逆逍透逐途逕逖逗這通逛逝逞速造逢連逮週進逵逸逼逾遁遂遇遊運遍過遏遐遑道達違遘遙遜遞遠遣遨適遭遮遲遴遵遷選遺遼遽避邀邁邂還邇邊邏邐邑邕邢那邦邪邱邵邸郁郊郎郡部郭郵都鄂鄉鄒鄙鄧鄭鄰鄱鄹酉酊酋酌配酒酗酣酥酩酪酬酵酷酸醃醇醉醋醒醜醞醣醫醬醺釀釁采釉釋里重野量釐金釗釘釜針釣釦釧釵鈉鈍鈐鈔鈕鈞鈣鈴鈷鈸鈽鈾鉀鉋鉑鉗鉛鉤鉸鉻銀銅銓銖銘銜銬銳銷銻銼鋁鋅鋒鋤鋪鋸鋼錄錐錘錚錠錢錦錨錫錯錳錶鍊鍋鍍鍛鍥鍬鍰鍵鍾鎂鎊鎔鎖鎢鎮鎳鏃鏈鏍鏑鏖鏗鏘鏜鏝鏟鏡鏢鏤鏽鐃鐘鐮鐲鐳鐵鐸鐺鑄鑑鑒鑠鑣鑰鑲鑼鑽鑾鑿長門閂閃閉開閏閑閒間閔閘閡閣閤閥閨閩閭閱閻闆闈闊闋闌闐闔闖關闡闢阜阡阪阮阱防阻阿陀附陋陌降限陛陝陡院陣除陪陰陲陳陴陵陶陷陸陽隅隆隊隋隍階隔隕隘隙際障隧隨險隱隴隸隻雀雁雄雅集雇雉雋雌雍雕雖雙雛雜雞離難雨雪雯雲零雷雹電需霄霆震霉霍霎霏霑霓霖霜霞霧霪露霸霹霽霾靂靄靈青靖靛靜非靠靡面靦靨革靴靶靼鞅鞋鞍鞏鞘鞠鞣鞦鞭韁韃韆韋韌韓韜韭音韶韻響頁頂頃項順須頊頌預頑頒頓頗領頡頤頭頰頷頸頹頻顆題額顎顏顓願顛類顧顫顯顰顱風颯颱颳颶颺颼飄飛食飢飧飩飪飭飯飲飴飼飽飾餃餅餉養餌餐餒餓餘餛餞餡館餵餽餾餿饅饑饒饜饞首香馥馨馬馭馮馱馳馴駁駐駑駒駕駙駛駝駟駢駭駱駿騁騎騖騙騫騰騷騾驀驃驅驕驗驚驛驟驢驥驪骨骯骰骷骸骼髏髒髓體高髦髭髮髯髻鬃鬆鬍鬚鬢鬥鬧鬨鬱鬲鬼魁魂魄魅魏魔魘魚魯魷鮑鮪鮫鮮鯉鯊鯧鯨鯽鰍鰓鰥鰭鰱鰻鰾鱉鱔鱖鱗鱷鱸鳥鳩鳳鳴鳶鴆鴉鴒鴕鴛鴣鴦鴨鴻鴿鵑鵝鵠鵡鵪鵬鵲鶉鶯鶴鷂鷓鷗鷥鷹鷺鸚鸞鹹鹼鹽鹿麂麋麒麓麗麝麟麥麩麴麵麻麼麾黃黍黎黏黑黔默黛黜黝點黠黨黯黴黷鼇鼎鼓鼕鼙鼠鼬鼴鼻鼾齊齋齒齜齟齡齣齦齪齬齲齷龍龐龔龜',
    # 台灣の次常用國字標準字體表
    '万丌与丏丮丰丱乂乜亍亓亢亳亶亹仂仉仜仝仡仨仩仱仵价伀伋伎伔优伬伻伾佁佈佉佌佒体佖佘佚佟佢佤佧佪佴佶佷佸佹佺佼佽侀侁侄侅侇侉侐侑侔侗侘侚侜侞侲侳侷侻俁俅俇俉俋俍俓俔俙俛俜俴俵俶俷倅倇倓倕倗倛倜倞倠倢倬倰倳倷偁偅偈偊偋偍偓偛偝偞偟偠偡偢偨偩偪偫偭偯偰偲傂傃傋傌傎傒傔傕傚傛傜傝傞傣傮傰傱傴傺傽傿僁僂僄僆僇僈僉僊僋僎僓僔僗僛僝僤僦僨僩僪僬僰僳僶僸僽僾僿儃儆儇儋儌儑儓儕儗儚儜儠儢儤儥儦儰儱儳儴儵儸儹儺儻儽兀兙党兛兝兞兡兣冇冏冓冔冘冞冪冱冼凄凅凊凔凘凵刉刌刓刖刜刞刱刲刳刵剄剆剉剒剕剚剞剟剡剫剬剭剸剺剻剼劀劁劂劄劊劋劌劓劖劗劘劙劦劭劼勍勖勣勩勰勱勴勺匊匜匢匭匰匴匷匼匽卌卍卣卬卼厂厎厒厖厗厜厞厤厬厹叡叻吪听吰吷呔呥呦呫呬呰呴呺呾呿咁咂咇咈咍咑咠咡咢咥咧咩咭咮咶咷咺咼咿哃哅哆哏哖哢哤哧哫哳哽哿唄唅唇唈唌唏唑唒唗唚唦唪唰唲唴唵唶唼啁啅啍啎啐啑啒啗啢啥啵啶啷啽喁喈喌喍喏喑喒喓喙喢喣喤喥喦喨喫喭喵喿嗀嗀嗃嗄嗈嗉嗊嗋嗌嗏嗐嗒嗔嗕嗖嗛嗝嗢嗧嗩嗲嗶嗺嗼嗿嘁嘂嘄嘌嘏嘐嘒嘓嘕嘜嘝嘧嘬嘳嘵嘸嘽嘾噀噁噂噅噆噈噉噊噌噘噚噞噠噣噦噭噮噰噲噳噶嚃嚄嚆嚌嚍嚓嚗嚘嚚嚜嚦嚧嚪嚫嚬嚭嚲嚳嚵嚽嚾囃囅囆囋囍囓囔囗囝囟囡囧囫囮囷囹囿圁圂圄圇圉圊圌圜圞圠圩圮圻坁坅坌坫坭坯坰坱坲坳坴坵坶坻垀垌垓垔垗垘垛垝垞垟垤垵垺垼垽埆埌埏埒埕埜埢埭埳埴埵埶埸埻埽堀堇堈堋堔堙堝堞堠堣堥堧堨堩堲堷塈塉塋塍塏塒塓塕塤塨塯塴塺塼塿墁墆墉墋墐墘墝墠墣墦墩墫墬墯墱墽壈壎壖壚壛壝壴壼壾壿夃夆夌复夎夒夗夬夯奅奊奓奡奫奭奰奲奼妀妎妐妗妘妠妢妦妲妵妺姁姌姎姏姝姞姡姤姮姱姶姺姼姽娀娉娖娙娭娵娷娸婐婓婕婗婘婞婟婠婤婥婧婬婭婸婺婼媔媕媞媟媢媥媦媧媬媮媯媰媱媵媸媺媻媿嫄嫇嫈嫋嫕嫚嫛嫜嫠嫢嫥嫪嫫嫭嫮嫳嫴嫶嫷嫽嫿嬃嬈嬐嬓嬔嬖嬗嬙嬛嬡嬥嬭嬲嬽嬾嬿孃孅孈孋孌孛孢孥孬孲孷宁宄宎宓宕宧宨寀寁寋寍寑寔寖寘寙寠寪寰寱尃尌尐尒尟尨尪尰尳尻屄屌屔屖屘屙屝屣屧屨屩屭屮屴屺屼岈岉岊岋岍岏岒岝岟岠岢岣岤岧岨岪岬岭岮岯岵峇峉峊峋峌峐峒峗峘峚峛峞峬峮峱峴峷峿崋崌崍崏崒崗崚崝崞崟崠崣崤崥崦崧崨崰崱崳崴崵崷崺崽崿嵁嵂嵃嵇嵊嵋嵎嵑嵒嵕嵙嵞嵣嵥嵫嵬嵯嵱嵲嵷嵺嵽嵾嶀嶁嶂嶆嶈嶉嶊嶒嶓嶔嶕嶗嶙嶚嶜嶞嶟嶠嶡嶢嶧嶨嶩嶪嶬嶭嶮嶰嶱嶲嶵嶷嶸巀巂巃巆巇巉巋巏巑巕巘巟巰巹巿帊帔帗帙帟帠帡帢帣帤帨帩帴帾幃幄幎幏幓幘幙幝幠幡幦幧幨幩幪幬幭幰幵庀庂庈庉庋庌庛庢庣庤庥庨庪庬庮庰庱庲庳庴庹廄廅廆廇廋廌廎廑廕廗廘廙廛廜廞廡廥廦廧廨廩廮廯廱廾异弅弇弋弚弝弢弣弤弨弮弳弶弸彀彃彄彉彊彋彏彔彖彘彧彯彳彴彸彾徂徉徛徜徠徥徦徭徯徲徼徾徿忀忁忉忐忑忒忔忕忞忡忣忤忥忨忪忭忮忯忳忷忸忺忻怊怋怍怐怓怗怙怚怛怞怢怦怩怫怬怭怮怲怳怴怷怹恀恁恂恅恇恉恌恓恔恚恛恝恞恟恧恲悀悁悃悆悇悈悊悐悒悕悗悛悝悢悰悱悷悹悺悾惄惇惈惉惌惎惏惓惔惙惛惝惢惤惲惵惷惸惼惾愅愆愊愍愒愓愔愖愨愫愬愮愯愲愶愷慁慅慆慉慊慒慓慔慛慞慥慬慱慲慳慴慵慹慺憀憃憉憋憍憒憓憖憛憝憟憡憢憨憪憭憮憯憰憱憴憵憸憺憼憿懁懃懅懆懋懌懘懞懟懠懤懥懧懨懪懫懭懮懰懱懻懽戁戃戄戇戉戔戠戣戥戧戩戭戺戽扂扃扆扊扐扑扜扞扡扢扤扦扱扺扻抃抆抇抌抎抏抔抪抭抮抴抶抾拊拏拑拫拲拵拶拸拹挀挂挃挋挌挍挎挏挐挩挬挲挴挶挹挻挼捁捃捄捅捊捋捌捍捔捖捘捥捭据捯捵捺捼捽掂掇掊掎掐掔掗掜掝掞掤掫掭掮掯掰掱掽掾揃揄揅揊揎揕揘揜揝揟揠揤揥揨揫揯揱揲揳揵揶揹搆搉搊搋搌搐搒搕搘搚搟搠搢搣搤搥搦搧搨搫搯搰搳搴搵搷搹摀摁摃摋摍摎摐摓摛摜摝摞摠摡摦摭摮摰摲摳摴摵摶摻摽摿撂撅撊撋撌撏撖撗撙撜撝撟撠撢撣撦撳撽撾擉擏擐擖擗擢擣擤擨擩擫擭擯擷擸擽擿攄攇攉攌攍攐攓攕攖攗攛攠攡攢攦攩攭攮攲攳攷攸攽敁敆敉敊敓敔敕敜敤敧敪敯敳敶敹敺敻敿斀斁斄斌斒斔斔斕斖斛斝斞斠斨斪斮斲斶斻斿旂旃旄旆旍旐旒旓旚旛旝旞旟旮旯旰旳旴旻旼昃昄昇昈昉昊昒昕昜昝昡昢昦昫昱昲昳昴昵昶昺晁晅晇晊晙晛晜晞晟晡晢晥晬晷晻晼晾暀暄暆暋暌暍暐暕暘暝暠暡暩暰暱暵暾曀曄曇曈曊曋曏曒曚曛曜曣曨曩曭曮曶朁朄朅朏朐朒朓朘朡朢朣朸朹机朻朼朾朿杅杆杇杈杌杓杕杗杙杝杠杪杬杲杴杶杻杼构枅枆枌枍枎枒枓枘枰枲枳枵枷枹枺枻柀柁柂柅柈柍柎柒柘柙柜柝柟柢柣柤柧柫柮柰柲柶柷柸栒栔栖栘栚栜栝栟栫栭栯栱栲栳栴栵栻桁桄桉桋桎桏桭桮桯桴桵桷桹桼梂梇梏梐梒梜梡梣梩梫梬梮梲梴棆棌棐棓棖棜棡棤棨棪棫棬棯棰棱棳棶棷棸棻棼棽椄椇椈椌椏椐椑椓椔椪椳椴椵椸椹椽椿楀楂楄楅楈楉楎楖楗楘楙楛楝楟楢楣楥楦楩楪楬楮楯楰楱楶楸楺榍榎榑榖榙榠榤榦榧榩榬榯榰榱榶榹榼榽榾榿槃槄槉槊槎槔槢槤槥槧槬槭槮槱槲槷槸槾槿樀樆樔樕樗樛樝樠樧樨樲樴樻樾樿橀橁橈橉橐橑橚橛橝橤橦橧橨橪橭橶橾檁檃檇檉檍檎檐檓檕檖檗檛檞檟檠檡檣檥檮檯檹檽櫅櫆櫋櫌櫐櫑櫙櫜櫟櫠櫡櫧櫨櫪櫫櫬櫰櫱櫳櫸櫹櫺櫼欂欃欈欋欐欑欒欘欥欨欬欭欯欱欳欴欶欷欸欹欻欿歂歃歅歆歈歊歋歍歎歔歕歛歜歠歭歶歾殀殂殄殈殍殏殑殔殗殙殛殞殟殠殢殣殥殦殧殪殫殭殰殳殶殽毃毄毇毈毉毊毌毐毖毘毚毞毣毤毦毨毬毰毲毳毹毻毼毾毿氀氁氂氄氅氈氍气氕氘氙氚氠氪氬氰氶氿汃汆汊汋汍汎汏汒汔汛汜污汦汧汩汫汭汯汱汳汴汶汸沂沄沆沇沋沍沏沓沔沕沘沚沜沬沭沴沶沷沺泂泃泆泐泒泔泖泙泚泜泝泠泧泫泬泭泮泯泲泵洀洄洊洍洎洑洒洙洚洟洧洨洩洫洭洮洳洴洵洸洹洺洼洿浘浞浟浠浡浢浣浤浥浧浭浯浰浶浹浺浼浿涂涅涆涊涌涍涑涒涔涗涘涪涫涬涳涴涷涽涾涿淀淈淊淔淖淛淜淝淟淠淢淥淦淩淬淭淯淰淴淶淼渀渃渜渟渢渨渫渮渰渱渳渹渻渼渽渿湀湁湄湅湆湇湉湋湎湑湓湜湝湞湟湠湡湢湣湨湩湫湱湲湳湴溈溏溓溔溛溞溟溠溦溧溰溱溲溴溷溹溽溾滀滁滃滆滈滉滍滎滏滒滕滖滜滫滭滮滱滵滷滸滹滻漃漅漇漉漊漎漒漘漙漚漥漦漧漭漮漰漵漶漷漻漼潀潁潃潎潏潐潒潕潗潚潝潞潟潠潢潬潯潲潳潶潾澂澅澇澉澌澍澒澓澔澖澞澠澣澥澦澨澩澭澮澴澶澼澽濄濆濇濈濊濋濌濎濔濕濜濞濣濦濧濩濭濮濰濴濻濼濿瀀瀁瀄瀅瀇瀌瀍瀎瀔瀖瀘瀙瀠瀡瀢瀣瀦瀧瀩瀫瀯瀱瀲瀴瀵瀷瀸瀹瀺瀼瀿灂灃灄灈灉灊灕灖灗灛灝灞灟灡灨灩灪炅炔炘炟炤炰炱炷炾烋烑烓烜烝烯烰烴烷烺烻焄焌焍焗焜焞焠焣焮焯焱煁煆煇煒煔煖煝煠煢煣煨煲熀熂熅熇熉熏熐熒熚熛熠熯熰熲熸熿燀燁燂燅燊燋燔燖燠燡燹燼燾燿爁爂爇爊爌爓爚爝爞爟爢爣牁牂牄牉牋牏牓牚牣牬牰牷牸牻牼牾牿犅犆犈犉犌犍犎犐犑犓犕犗犘犚犝犞犣犤犥犦犨犩犪犮犰犴犵犽犿狁狃狆狉狊狋狌狑狒狔狖狘狚狜狟狣狤狦狨狪狫狳狴狶狺狻狾狿猀猇猈猊猋猏猑猒猗猘猝猢猣猦猧猭猰猱猲猳猵猺猻猼獀獂獃獊獌獍獑獒獘獛獝獞獟獠獡獥獦獧獩獪獫獬獮獯獳獶獼獽獾獿玁玂玃玅玆玈玊玎玓玔玕玗玠玡玢玤玦玭玼珂珅珈珌珓珖珙珞珣珥珧珩珪珵珶珸珽琀琁琄琇琖琚琛琡琤琦琨琫琬琭琮琯琰琱瑀瑄瑊瑋瑑瑒瑗瑢瑱瑲瑳瑵瑽瑾瑿璀璁璅璆璇璉璊璐璗璘璚璞璟璠璨璪璫璲璵璸璺璿瓀瓁瓅瓋瓔瓖瓘瓚瓛瓝瓞瓟瓡瓤瓥瓨瓩瓬瓮瓴瓵瓽瓾瓿甀甂甃甈甋甍甐甑甒甓甔甖甗甝甡甪甮甯甹町甾甿畀畇畋畎畛畟畣畤畬畯畷畹畽畿疀疌疐疔疕疢疣疧疰疸疻痀痁痂痄痋痌痍痎痏痑痒痗痚痝痟痠痡痤痦痧痯痳痷痸痹痻痼痾瘃瘈瘊瘌瘏瘐瘑瘕瘖瘙瘜瘝瘞瘢瘣瘥瘭瘯瘱瘲瘳瘵瘺瘼瘽癃癇癈癉癐癓癙癜癟癠癤癪癭癰癵癹皁皊皋皏皕皙皛皜皝皞皤皦皫皭皯皵皸皻皽皾盄盅盉盓盝盦盩盬盭盱盳盷盻眃眄眅眇眈眊眐眑眒眓眕眙眚眛眝眢眣眥眭眯眱眲眳眴眹眽睄睅睆睇睊睋睌睍睎睒睔睕睖睚睟睠睢睧睩睮睯睼睾瞀瞁瞂瞅瞉瞋瞍瞏瞚瞛瞜瞝瞡瞢瞫瞲瞴瞵瞶瞷瞼矂矉矊矌矍矎矏矐矔矕矘矙矞矠矧矬矰矱矲矸矹矺矻矼砅砆砉砎砏砐砑砒砟砠砢砣砦砨砬砮砯砲砵硈硉硊硌硍硎硒硜硠硤硥硩硪硭确硰硱硾碄碅碆碇碏碓碔碕碚碞碣碨碪碫碭碲碴碻磃磈磌磍磎磏磑磔磛磝磞磣磥磧磩磪磳磻磼磽磿礂礉礌礐礓礔礛礜礝礣礥礧礨礭礱礴礵礽礿祂祅祊祋祌祏祑祒祓祔祛祜祡祣祤祧祩祪祫祲祳祴祼禂禊禋禓禔禕禖禗禘禚禜禠禡禨禫禬禭禰禳禴禷禸禺离秅秈种秎秏秕秖秘秠秪秫秬秭秮秶秸秺稂稃稊稌稑稒稗稘稙稞稫稯稰稹穄穈穊穋穖穛穜穟穠穧穨穬穭穮穰穱穸穾窀窅窆窉窊窋窌窏窐窔窙窞窢窣窨窫窬窱窲窳窴窵窶窸窾窿竀竁竑竘竦竫竷笄笅笈笊笏笐笓笘笝笢笤笥笪笫笭笮笯笰笱笲笳笴笵笻筄筇筈筊筌筑筡筤筥筦筧筩筭筮筰筱筲筳筴箄箅箇箈箊箌箍箎箐箑箖箘箙箛箜箠箬箯箷箸箹箾篋篌篎篔篕篚篝篞篠篣篥篦篧篨篪篲篳篴篸篹篻篽篿簀簁簂簃簅簉簋簌簎簏簙簜簝簟簠簢簥簦簨簩簬簭簳簹簻簼籀籈籉籊籔籗籙籛籜籣籥籦籧籩籯籸籹籺籽粄粊粑粔粕粘粢粲粺粻粼粿糅糈糌糎糒糔糗糝糪糬糰糱糲糴糶糷紃紆紈紎紑紒紓紖紘紝紞紟紩紬紱紲紵紶紸紺紽紾紿絁絅絇絏絓絖絘絛絜絣絧絪絫絭絯絰絳絺絻絼絿綀綃綅綆綈綌綍綎綔綖綝綟綣綦綧綪綬綮綯綷綹綼緀緁緂緄緅緆緋緌緎緗緙緛緡緦緧緪緰緱緲緳緶緷緹緺縃縉縋縌縎縏縐縒縓縕縗縚縜縝縞縟縠縡縢縩縪縭縰縳縴縵縶縸縹縻縼縿繀繂繄繇繈繉繌繐繑繒繖繘繙繜繟繠繢繣繯繰繲繳繴繵繶繷繸繺繻繾纀纁纆纇纈纊纋纍纑纔纕纗纘纚纛缹缾缿罃罅罊罋罌罍罏网罘罛罜罝罞罠罡罣罥罦罧罨罫罬罭罳罶罺罻罼罽罾罿羃羆羇羉羍羑羒羕羖羛羜羝羠羡羢羥羦羧羬羭羰羱羳羵羷羺羼羾翂翃翇翊翋翍翏翐翑翛翜翢翣翥翦翨翪翫翬翭翮翯翲翴翽翾翿耄耇耋耎耏耑耔耖耞耟耡耤耦耨耪耬耰耴耵耷耹耾聃聇聈聏聑聒聝聵聹肂肊肏肐肒肕肙肜肣肮肵肸胂胅胇胈胉胊胏胐胑胔胕胗胘胙胜胝胠胣胯胲胵胹胺胻胼胾脀脁脕脘脙脛脞脟脡脤脥脧脬脭脰脽腃腄腇腊腌腍腏腒腓腛腜腞腠腢腤腧腩腯腲腴腶腷膂膃膆膇膉膋膌膍膕膘膞膟膢膣膦膫膬膮膰膱膲膴膵膷膹膻臄臅臇臊臌臐臑臒臕臗臙臛臝臞臠臡臢臦臩臮臲臷臸臿舁舄舋舑舕舖舝舠舡舯舲舳舴舸舺舼舽艀艂艄艅艉艋艎艏艐艑艒艓艕艛艟艤艨艫艴艵艸艼艽芀芃芄芅芊芎芏芐芑芓芔芘芚芛芞芠芡芣芧芨芩芫芮芯芰芴芵芷芸芺芼芾苀苕苖苙苡苨苫苬苯苲苴苵苶苹苻苾茀茆茇茈茌茍茖茙茛茜茠茢茤茥茦茨茩茪茭茯茳茷茺茻茼茿荁荂荃荄荅荇荍荎荑荖荳荴荵荺荽荾莁莃莆莋莌莍莏莐莔莕莙莛莝莣莤莥莧莨莩莪莿菀菂菆菇菈菉菋菎菏菑菔菕菖菘菙菝菞菟菡菣菤菥菧菨菫菳菵菶菹菺菼菿萁萆萇萉萏萐萑萒萣萩萭萯萰萲萴萷萹萺萿葀葂葃葅葆葋葌葍葎葑葒葖葙葚葝葞葟葥葧葭葯葰葳葴葶葸葹葺葽蒆蒍蒏蒔蒗蒘蒚蒛蒝蒟蒠蒡蒢蒤蒧蒨蒩蒪蒫蒬蒮蒯蒱蒴蒶蒹蒺蒻蓁蓂蓇蓊蓌蓍蓎蓏蓐蓑蓖蓧蓨蓩蓪蓫蓯蓰蓱蓲蓳蓴蓶蓷蓹蓺蓻蓼蓽蓾蔀蔂蔆蔇蔈蔉蔊蔌蔍蔎蔏蔒蔕蔖蔘蔜蔝蔞蔟蔠蔤蔦蔧蔨蔩蔪蔫蔮蔰蔱蔻蔾蕀蕁蕄蕅蕆蕇蕍蕎蕑蕓蕕蕖蕗蕘蕛蕝蕞蕠蕡蕢蕣蕤蕦蕧蕫蕮蕱蕵蕷蕸蕺蕻蕼薀薁薂薃薅薆薈薉薊薋薌薍薎薏薕薖薙薚薝薞薠薡薢薣薤薧薨薱薳薴薵薶薹薺薽薿藀藂藃藄藅藆藇藈藋藎藑藒藗藘藙藚藜藟藡藣藨藫藬藭藰藱藲藶藷藸藾藿蘀蘁蘄蘅蘉蘌蘘蘙蘛蘜蘞蘟蘠蘡蘢蘣蘤蘥蘦蘧蘩蘪蘬蘮蘱蘳蘴蘵蘹蘺蘻蘼蘾虀虃虆虇虈虋虌虒虓虖虙虡虢虣虩虪虭虮虯虰虴虷虺虻蚅蚆蚇蚋蚍蚑蚕蚖蚗蚙蚚蚜蚞蚡蚢蚥蚧蚨蚰蚳蚴蚷蚸蚹蚺蚻蚼蚿蛁蛂蛅蛈蛉蛌蛐蛓蛖蛗蛘蛚蛜蛝蛞蛢蛣蛦蛩蛪蛫蛬蛵蛶蛷蛸蛺蜁蜄蜆蜉蜊蜋蜌蜍蜎蜑蜒蜙蜚蜛蜞蜠蜡蜣蜤蜦蜧蜨蜩蜪蜬蜭蜮蜰蜱蜲蜳蜵蜷蜸蜺蜼蜾蝀蝁蝂蝃蝆蝍蝎蝐蝑蝒蝓蝔蝖蝘蝚蝛蝜蝝蝞蝟蝡蝣蝤蝥蝪蝫蝬蝭蝮蝯蝳蝷蝹蝺螁螄螅螇螈螏螐螑螒螓螔螖螗螘螚螛螜螝螣螪螬螭螮螯螰螴螵螶螷螸螹螼螽螾螿蟂蟃蟄蟅蟉蟊蟌蟓蟔蟗蟘蟙蟛蟜蟞蟟蟠蟡蟢蟣蟤蟥蟦蟧蟨蟪蟫蟭蟳蟴蟶蟷蟺蟼蟾蟿蠀蠁蠃蠆蠈蠉蠋蠌蠐蠑蠓蠖蠗蠙蠛蠜蠝蠠蠤蠥蠦蠨蠩蠪蠫蠬蠮蠯蠰蠲蠳蠵蠷蠸蠼蠽蠾蠿衁衃衄衈衊衋衎衒衕衖衚衧衩衪衭衯衱衲衵衶衹衽衾衿袀袃袉袌袑袕袗袘袙袚袛袟袡袢袤袧袨袪袬袲袶袷袸袹袺袼袽袾裀裋裍裎裒裖裗裚裛裞裧裮裯裱裲裶裷裺裻裼裾褁褅褆褊褋褌褎褑褔褕褖褗褘褙褞褡褢褦褧褩褭褮褰褱褳褵褷褼褽褾襁襂襆襋襌襏襐襒襓襗襘襚襛襜襝襞襡襢襣襦襩襬襭襮襳襴襶襹襺襾覂覅覈覕覘覛覜覝覡覢覣覤覭覮覯覶覷覿觓觔觕觖觙觚觜觝觟觠觡觢觤觥觩觫觬觭觰觱觲觳觶觷觺觻觼觾觿訄訇訏訑訒訞訢訧訬訰訶訹訾訿詀詄詅詈詍詎詒詖詗詘詙詡詵詶詷詻詿誂誃誄誆誋誒誙誚誫誶誸誹誻誾諀諅諆諈諏諑諓諔諕諗諛諝諞諟諠諡諢諤諰諲諳諴諵諶諼謅謇謈謋謍謏謐謑謒謔謕謖謘謞謢謣謥謦謧謪謫謯謰謱謳謵謷謼謾譀譅譆譇譈譊譋譐譑譓譔譕譖譙譝譟譠譣譥譨譪譸譹譺譻譾讂讄讆讋讌讎讔讕讘讙讜讞讟谹谻谼谽谾豃豇豋豍豏豗豜豝豟豤豥豦豨豭豯豰豱豲豳豵豶豷豸豻豽貀貁貄貅貆貏貑貒貔貕貗貘貙貜貣貤貰貺貾賌賕賙賚賟賡賥賨賮賵賸賻賾贄贆贇贐贔贕贙赨赩赬赮赶赸趀趄趌趍趎趏趑趓趜趠趡趥趧趪趫趬趭趮趯趲趵趷趹趺趼趿跂跅跇跈跍跏跐跓跕跖跗跘跙跜跠跢跣跤跦跧跩跫跬跮跰跱跲跽跾跿踂踃踅踆踇踉踊踍踑踒踓踔踕踖踘踙踛踞踠踡踣踤踥踦踧踮踰踳踶踸踼踽踾蹀蹁蹅蹇蹌蹍蹎蹐蹓蹔蹕蹖蹗蹚蹛蹜蹝蹞蹟蹠蹡蹢蹥蹧蹩蹪蹭蹯蹳蹴蹸蹻躄躆躈躋躐躒躓躔躕躖躗躚躞躟躠躣躤躥躦躨躩躽軏軑軓軘軝軞軥軦軧軨軫軬軮軯軱軵軶軷軹軺軿輀輁輂輅輆輇輈輋輐輑輖輗輘輚輞輠輣輤輥輬輮輲輳輴輵輶輷輹轀轃轆轇轈轏轐轑轒轓轕轖轗轘轙轚轛轝轞轠轢轤辴迉迋迍迒迓迕迖迡迣迤迨迮迵迸迻迾迿适逄逋逌逑逜逡逤逭逯逴逶逿遄遒遛遝遢遯遰遳遶遹遻遾邃邅邆邈邋邍邔邗邘邙邛邞邟邠邡邥邧邯邰邲邳邴邶邽邾邿郃郅郇郈郋郔郕郖郗郘郙郚郛郜郝郟郠郢郣郤郥郪郫郯郰郱郲郳郴郹郺郻郼郾郿鄀鄁鄃鄄鄅鄆鄇鄈鄋鄍鄎鄏鄐鄑鄔鄖鄗鄘鄚鄛鄜鄝鄞鄟鄠鄡鄢鄣鄤鄦鄨鄩鄪鄫鄬鄮鄯鄲鄳鄴鄵鄶鄸鄺鄻鄾酀酁酃酄酅酆酇酈酎酏酐酓酖酘酚酟酡酢酤酨酮酯酲酳酴酹酺醁醅醆醊醍醐醑醓醙醚醛醟醢醥醧醨醪醭醮醯醰醱醲醳醴醵醷醹醼醽醾釂釃釅釆釔釕釙釢釤釩釬釭釱釳釴釸釹釽釿鈀鈁鈃鈆鈇鈊鈌鈏鈑鈒鈚鈥鈦鈮鈰鈳鈶鈹鈺鈿鉅鉆鉈鉉鉊鉍鉏鉒鉚鉞鉠鉥鉦鉧鉬鉭鉯鉶鉹鉺鉼鉿銃銍銎銑銔銗銚銛銠銣銤銥銦銨銪銫銲銶鋀鋂鋃鋄鋇鋈鋊鋋鋌鋏鋐鋗鋘鋙鋝鋟鋨鋩鋮鋯鋰鋱錁錆錈錍錎錏錒錕錙錛錞錟錡錣錧錭錮錸錼鍆鍇鍉鍌鍐鍑鍔鍖鍘鍚鍜鍠鍤鍪鍭鍶鍺鍼鎃鎉鎌鎎鎏鎒鎗鎘鎚鎛鎝鎞鎡鎦鎧鎩鎪鎬鎯鎰鎵鎷鏂鏇鏊鏌鏏鏐鏙鏚鏞鏦鏨鏬鏵鏷鏹鏻鏾鐀鐇鐋鐍鐎鐏鐐鐓鐔鐕鐖鐙鐠鐨鐫鐶鐻鐿鑊鑋鑌鑐鑕鑢鑪鑫鑭鑮鑯鑱鑴鑷钀钁钂钃镺镻镼镽閆閈閌閍閎閜閞閟閫閬閵閶閷閹閺閼閽閾閿闀闃闅闇闉闍闑闒闓闕闚闛闞闟闠闤闥阞阠阢阤阨阬阯阰阹阺阼阽陂陊陏陑陓陔陘陜陞陟陫陬陭陼陾隃隄隇隈隉隑隒隓隗隞隤隩隮隰隳隹隼隿雂雈雊雎雒雓雔雗雘雚雝雟雩雰雱雺雽雿霂霅霈霋霐霒霠霢霣霤霩霫霬霮霰霵霿靃靆靉靚靪靬靮靰靲靳靷靸靺靻靽靾鞀鞂鞃鞄鞈鞊鞎鞔鞗鞙鞚鞜鞞鞡鞤鞨鞪鞫鞬鞮鞳鞶鞷鞹鞻鞿韄韅韇韉韍韎韏韐韔韕韗韙韝韞韟韡韣韥韰韱韹韽頄頇頍頎頏頖頜頝頞頠頦頨頩頫頯頲頵顁顄顅顈顉顊顐顑顒顗顙顜顝顟顠顢顣顤顥顩顪顲顳顴颬颭颮颲颸颻颽颾颿飁飂飆飉飋飌飣飫飶飺餀餂餈餑餔餕餖餗餚餟餤餥餧餪餫餬餭餮餯餰餱餲餳餼饁饃饇饈饉饋饌饎饐饔饕饗饘饙饛饟饡馗馘馝馣馦馯馰馲馵馹馺馻馽駂駃駉駍駎駏駓駔駖駘駜駣駤駥駩駪駬駮駰駴駶駷駸駹駺駻駼駽駾騂騃騄騅騇騉騊騋騍騏騑騕騚騛騜騝騞騠騢騣騤騥騧騩騪騬騭騮騱騲騴騵騶騸騹騺騽驁驂驄驆驈驉驊驌驍驎驏驒驓驔驖驞驠驤驦驨驩驫骫骭骴骹骾骿髀髁髂髆髇髊髍髐髑髕髖髟髡髣髧髫髬髲髳髶髹髺髼髽髾鬁鬄鬅鬈鬊鬋鬌鬎鬐鬒鬕鬖鬗鬘鬙鬞鬟鬠鬣鬤鬩鬫鬮鬯鬳鬵鬷鬺鬻鬾鬿魃魆魈魊魋魌魍魎魑魖魠魡魦魧魱魴魵魶魻魼魾鮀鮂鮅鮆鮇鮐鮒鮓鮚鮛鮞鮡鮤鮥鮦鮨鮭鮵鮸鮿鯀鯁鯃鯆鯇鯈鯓鯔鯖鯗鯛鯞鯠鯢鯤鯦鯪鯫鯬鯰鯷鯸鰅鰈鰋鰒鰜鰝鰣鰨鰩鰫鰬鰲鰳鰴鰷鰹鰼鰿鱀鱁鱄鱆鱈鱊鱋鱍鱐鱒鱕鱘鱞鱟鱠鱢鱣鱦鱧鱨鱮鱳鱴鱹鱺鳦鳧鳪鳭鳱鳲鳵鳷鳹鳺鳻鳼鳽鳿鴀鴃鴅鴇鴈鴐鴔鴗鴘鴝鴞鴠鴢鴥鴩鴮鴯鴰鴱鴳鴶鴷鴸鴽鴾鵀鵁鵂鵃鵅鵊鵋鵌鵏鵒鵓鵔鵖鵗鵙鵛鵜鵟鵧鵩鵫鵯鵰鵱鵳鵴鵵鵷鵸鵹鵻鵽鶀鶁鶂鶄鶅鶆鶈鶊鶋鶌鶐鶒鶔鶖鶗鶘鶙鶚鶛鶜鶝鶞鶟鶠鶡鶢鶣鶤鶨鶩鶪鶬鶭鶱鶵鶶鶷鶹鶺鶻鶼鶾鶿鷁鷃鷅鷇鷈鷊鷋鷎鷏鷐鷑鷒鷕鷖鷘鷙鷚鷛鷜鷞鷟鷡鷢鷣鷤鷦鷩鷫鷮鷯鷰鷲鷵鷶鷷鷸鷻鷽鷾鷿鸀鸁鸂鸃鸄鸅鸆鸇鸉鸋鸍鸏鸐鸑鸒鸓鸔鸕鸗鸙鸛鸝鹵鹺麀麃麆麇麈麉麊麌麎麑麔麙麚麛麜麠麡麤麧麮麰麶麷黀黂黈黌黐黓黕黖黚黟黤黥黧黫黭黮黰黲黳黵黶黹黺黻黼黽黿鼀鼁鼆鼉鼊鼏鼐鼒鼖鼘鼛鼜鼢鼣鼤鼥鼨鼩鼪鼫鼭鼮鼯鼰鼱鼲鼳鼵鼶鼷鼸鼽齀齁齂齃齇齉齌齍齎齏齔齕齖齗齘齛齝齞齠齤齥齧齫齮齯齰齱齴齵齶齸齹齺齻齾龒龕龠龢龤',
);
}

# 漢字扱い(kanji.*にコードが記されている)非漢字
push @priority_groups, '♀♂々〒㈱㈲㈹㊤㊥㊦㊧㊨仝';

# 漢字の優先度を計算
# 使用頻度と似た概念
#  5 - 最も高い優先度
#  4 - やや低い
#  3 - もっと低い
#  ..
#  0 - この漢字を使わない
# など...
sub priority {
    my $priority = 5;
    my ($c) = @_;
    $c = ord $c;
    for my $search_str (@priority_groups) {
        my $min = 0;
        my $max = length $search_str;

        while ($min < $max) {
            my $try = ($min + $max) >> 1;
            my $tried = ord(substr $search_str, $try, 1);
            if ($tried < $c) {
                $min = $try + 1;
            } elsif ($tried > $c) {
                $max = $try;
            } else {
                return $priority;
            }
        }
        $priority--;
    }

    return 0;
}

# ターミナル上の字の幅を返す
# 半角の場合：1
# 全角の場合：2
# 文字列の長さが2以上の場合、全文字合計の幅を返す
sub char_width {
    my ($s) = @_;
    my $total = 0;

    # 幅を持たない色のコードを消す
    $s =~ s/\e\[\d\dm//g;

    for my $char (split q{}, $s) {
        my $ord = ord $char;
        if ($ord <= 0xff) {
            $total += 1;
        } elsif ($ord >= 0xff01 && $ord <= 0xff60) {
            # 全角英数字
            $total += 2;
        } elsif ($ord >= 0xff61 && $ord <= 0xffdc) {
            # 半角カタカナ
            $total += 1;
        } elsif ($ord >= 0xf900 && $ord < 0xfb00) {
            # CJK Compatibility Ideographs
            $total += 2;
        } elsif ($ord >= 0x10000) {
            # surrogate pair (多分、漢字)
            $total += 2;
        } elsif ($ord >= 0x3000 && $ord <= 0x30fe) {
            # 平仮名／片仮名
            $total += 2;
        } elsif ($ord >= 0x3200 && $ord < 0xa000) {
            # Enclosed CJK Letters [3200, 3300)
            # CJK 互換             [3300, 3400)
            # "Rare" CJK           [3400, 4e00)
            # 漢字                 [4e00, 0xa000)
            $total += 2;
        } else {
            $total += 1;
        }
    }

    return $total;
}

sub guide_ji {
    my ($key) = @_;
    my $raw_ji = $codes{$key};
    my $padding = q{ } x (2 - char_width $raw_ji);
    my $priority = priority $raw_ji;
    if ($priority == 5) {
        # 常用漢字を青く描画する
        return "\e[34m$raw_ji\e[39m$padding";
    } elsif ($priority == 4) {
        # 次常用漢字を赤く描画する
        return "\e[31m$raw_ji\e[39m$padding";
    } elsif ($priority == 3) {
        return "\e[32m$raw_ji\e[39m$padding";
    } else {
        return "$raw_ji$padding";
    }
}

if (!@codes_files) {
    my $code_dir_path = "$FindBin::Bin/code";
    opendir my $code_dir, $code_dir_path or die;
    while (my $code_file = readdir($code_dir)) {
        push @codes_files, "$code_dir_path/$code_file";
    }
}

sub simplify_yomi {
    my ($a) = @_;
    # 読み鍵を決定する際、ひら・カタを区別しないので、ひらがなをカタカナに変換
    # する
    $a =~ tr/ぁ-ゖ/ァ-ヶ/;
    $a =~ tr/ャュョ/ヤユヨ/;
    # 半濁音と濁音も無視するので、濁点を取り除く
    $a =~ tr{ガギグゲゴザジズゼゾダヂヅデドバビブベボパピプペポ}
            {カキクケコサシスセソタチツテトハヒフヘホハヒフヘホ};
    return $a;
}

sub read_codes {
    %codes = ();
    %suggestions = ();
    for my $codes_file (@codes_files) {
        open my $codes, $codes_file
            or die "Cannot open $codes_file: $!";
        binmode $codes, ':utf8';

        while (my $line = <$codes>) {
            chomp $line;

            my ($key, $value, @notes) = split m/\t/, $line;
            if (!defined $value) {
                print STDERR "Could not process code: $line\n";
                die;
            }

            next if priority($value) == 0 && $codes_file =~ m#/kanji\.#;

            # コードが衝突する場合、自動的にコードを整理
            # 優先度の低い方をシフトコードに移す
            if (defined $codes{$key}) {
                die if length($key) != 3;
                my $shift_key =
                    substr($key, 0, 2) . shift_key(substr($key, 2));
                die "$codes_file $key $shift_key"
                    if defined($codes{$shift_key});

                if (priority($value) > priority($codes{$key})) {
                    $codes{$shift_key} = $codes{$key};
                    delete $codes{$key};
                } else {
                    $key = $shift_key;
                }
            }

            die "Duplicate code: $key" if defined $codes{$key};
            $codes{$key} = $value;

            # hbかhyの注がある場合は%suggestionsのマップを拡張する

            # hyに相当する読み鍵を計算する
            my @hy_keys = map {
                # yomikenとyomi_rangesを使って読みから読み鍵の変換を行う
                my $yomi = simplify_yomi $_;
                my $match_id = $#yomi_ranges;
                for my $id (0..($#yomi_ranges-1)) {
                    if (($yomi_ranges[$id + 1] cmp $yomi) > 0) {
                        $match_id = $id;
                        last;
                    }
                }
                $yomiken[$match_id];
            } map {substr $_, 2} grep {$_ =~ /^hy/} @notes;

            # hbに相当する部首鍵を計算する
            my @hb_keys = map {
                if (!$rad_to_key{$_}) {
                    print STDERR "radical not in \%rad_to_key: $_\n";
                    die;
                }
                $rad_to_key{$_};
            } map {substr $_, 2} grep {$_ =~ /^hb/} @notes;

            # 実際の読み・部首は明記されている場合、サジェストに入れる
            my @code_source_notes = map {
                my $x = $_;
                $x =~ s/^y/読み＝/;
                $x =~ s/^b/部首＝/;
                $x;
            } grep {
                $_ =~ /^[yb]/;
            } @notes;

            next if !@hb_keys && !@hy_keys;
            my $code_help = "$key => $value";
            if (@code_source_notes) {
                local $";
                $" = q{、};
                $code_help .= " (@code_source_notes)";
            }

            my $b_key = substr $key, 0, 1;
            my $y_key = substr $key, 1, 1;
            for my $b ($b_key, @hb_keys) {
                for my $y ($y_key, @hy_keys) {
                    next if $b eq $b_key && $y eq $y_key;

                    my $array = $suggestions{"$b$y"} //= [];
                    push @$array, $code_help;
                }
            }
        }
    }

    # コードファイルに入っていないか設定言語のＬノートが付いていないのに、常用
    # されている漢字があれば、コードファイルを直す必要がある。コードを割り当て
    # るか、Lノートを追加しよう。
    my %code_by_kanji = reverse %codes;
    for my $group (@priority_groups) {
        for my $ji (split(m//, $group)) {
            die sprintf("%X", ord($ji)) if not defined $code_by_kanji{$ji};
        }
    }
}
read_codes;

ReadMode 4; # Turn off controls keys

my @input_history;

sub print_keyboard_row {
    my ($left_padding, $key_names, $keyboard_ref) = @_;
    my @key_name_array = split q{}, $key_names;

    my $draw_frame = !$keyboard_ref;
    $keyboard_ref //= {};

    if ($draw_frame) {
        print $left_padding;
        my $separator = q{};
        for my $key_name (@key_name_array) {
            if ($key_name eq q{ }) {
                print q{  };
                next;
            }
            printf '%s┌%s ┐', $separator, $key_name;
            $separator = q{ };
        }
        erase_to_eol;
    }
    print "\n";
    print $left_padding;
    for my $key_name (@key_name_array) {
        if ($key_name eq q{ }) {
            print q{  };
            next;
        }
        my $key_value = $keyboard_ref->{$key_name} || q{  };
        my $shift_value = $keyboard_ref->{shift_key $key_name} || q{│ };
        if (char_width($key_value) > 2) {
            $key_value = q{..};
        }
        if (char_width($shift_value) > 2) {
            $shift_value = q{..};
        }
        printf '│%s%s', $key_value, $shift_value;
    }
    erase_to_eol;
    print "\n";
    if ($draw_frame) {
        print $left_padding;
        my $separator = q{};
        for my $key_name (@key_name_array) {
            if ($key_name eq q{ }) {
                print q{  };
                next;
            }
            my $index_finger_key = $key_name eq 'f' || $key_name eq 'j';
            printf '%s└%s┘', $separator, ($index_finger_key ? '==' : '──');
            $separator = q{ };
        }
        erase_to_eol;
    }
}

# The argument is a hash from keys (e.g. 'f') to something to draw inside the
# keyboard in the guide. If the key is omitted in the map, the key is kept
# blank. Otherwise, it should be a single wide character.
# If that argument is omitted, then it only draws the keyboard outline.
sub print_keyboard {
    my ($keyboard_ref) = @_;

    my ($width, $height) = GetTerminalSize;
    printf "\033[%d;0H", ($height - 8);

    print_keyboard_row q{}, 'qwert yuiop', $keyboard_ref;
    print "\n";
    print_keyboard_row q{  }, 'asdfg hjkl;', $keyboard_ref;
    print "\n";
    print_keyboard_row q{    }, 'zxcvb nm,./', $keyboard_ref;
}

my $last_term_size = q{};
sub maybe_refresh_screen {
    my $term_size = join q{,}, GetTerminalSize;
    return if $term_size eq $last_term_size;
    $last_term_size = $term_size;

    clear_screen;

    printf "\033[0;0H";
    for my $past_input (@input_history) {
        print "$past_input\n";
    }

    print_keyboard;
}

# 標準入力からキーを一つ読むか、Alt+キーを読む
sub read_key_chord {
    my $first_key = ReadKey 0;
    return $first_key if ord($first_key) != 27;
    return $first_key . ReadKey(0);
}

while (1) {
    local $";
    $" = q{};

    maybe_refresh_screen;

    # Jump to underneath the last input history item
    printf "\033[%d;0H", scalar(@input_history) + 1;

    print "@entered_text";
    if (@uncommitted) {
        print "<@uncommitted>";
    }

    erase_to_eol;

    my $key = read_key_chord;
    if ($key eq "\x1b" . 'h') {
        my $prefix = join q{}, @uncommitted;
        print "\n";
        my $suggestions = $suggestions{$prefix} // [];
        for my $suggestion (@$suggestions) {
            print "$suggestion\n";
        }
        read_key_chord;
        next;
    } elsif ($key eq "\x1b" . 'b') {
        print <<"BUSHU_CHART";

鍵  部首
---------------------------------------------------
a   一 丨 丶 丿 乙 亅  【二画】二 亠
b   人
c   儿 入 八 冂 冖 冫 几 凵 刀 力 勹 匕 匚 匸 十 卜
d   卩 厂 厶 又  【三画】口 ツ
e   囗 土 士 夂 夊 夕 大
f   女 子 宀 寸 小 尢
g   尸 屮 山 巛 工 己 巾 干 幺 广 廴 廾
h   弋 弓 彐 彡 彳  【四画】心
i   戈 戶 手
j   支 攴 文 斗 斤 方 无 日 曰 月
k   木
l   欠 止 歹 殳 毋 比 毛 氏 气
m   水
n   火 爪 父 爻 爿 片 牙 牛 犬【五画】玄
o   玉 瓜 瓦 甘 生 用 田 疋 疒
p   癶 白 皮 皿 目 矛 矢 石
q   示 禸 禾 穴 立
r   竹  【六画】米
s   糸 缶 网 羊
t   羽 老 而 耒 耳 聿 肉 臣 自 至 臼 舌 舛 舟
u   艮 色 艸
v   虍 虫 血 行 衣
w   襾  【七画】見 角 言 谷 豆 豕
x   豸 貝 赤 走 足 身 車
y   辛 辰 辵 邑 酉 釆 里
z 【八画】金
;   長 門 阜 隶 隹 雨 靑 非【九画】面 革 韋 韭 音
,   頁 風 飛 食 首 香【十画】馬 骨 高 髟 鬥
.   鬯 鬲 鬼 【十一画】魚 鳥 鹵
/   鹿 麥 麻 黃【十二画以上】黍 黑 黹 黽 鼎 鼓 鼠
    鼻 齊 齒 龍 龜 龠
BUSHU_CHART
        read_key_chord;
        next;
    }
    next if length($key) == 2;
    if (ord($key) < 0x20 && $key ne "\n") {
        next;
    }

    if ($key eq "\n") {
        if (@uncommitted) {
            push @entered_text, @uncommitted;
            @uncommitted = ();
        } elsif (!@entered_text) {
            @input_history = ();
            # 開発中はコードを調整・追加するので、コードを最読込
            read_codes;

            # 乱れている場合があるので、キーボードを最描画する
            clear_screen;
            print_keyboard;
        } else {
            my $completed_text = join q{}, @entered_text;
            push @input_history, $completed_text;
            term_copy $completed_text;
            @entered_text = ();
        }
    } elsif (ord($key) == 127) {
        # Backspace
        if (@uncommitted) {
            pop @uncommitted;
        } elsif (@entered_text) {
            pop @entered_text;
        }
    } else {
        push @uncommitted, $key;
    }

    while (@uncommitted > 3) {
        push @entered_text, shift(@uncommitted);
    }

    my $maybe_code = join q{}, @uncommitted;
    if ($codes{$maybe_code}) {
        push @entered_text, $codes{$maybe_code};

        if (length($maybe_code) == 3) {
            my @chars = split q{}, $maybe_code;
            my %keyboard = (
                $chars[0] => '1 ',
                $chars[1] => '2 ',
                $chars[2] => guide_ji($maybe_code),
            );
            print_keyboard \%keyboard;
        }
        @uncommitted = ();
    }

    while (@uncommitted >= 3) {
        push @entered_text, shift(@uncommitted);
    }

    my %keyboard = ();
    for my $key (@kanji_keys, map {shift_key $_} @kanji_keys) {
        my $suggested_code = join q{}, @uncommitted, $key;
        if ($codes{$suggested_code}) {
            $keyboard{$key} = guide_ji $suggested_code;
        }
    }
    if (%keyboard) {
        print_keyboard \%keyboard;
    }
}
